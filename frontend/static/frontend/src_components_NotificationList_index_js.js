/*! For license information please see src_components_NotificationList_index_js.js.LICENSE.txt */
"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([["src_components_NotificationList_index_js"],{"./node_modules/@mui/system/esm/Box/Box.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! prop-types */ "./node_modules/prop-types/index.js");\n/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _createBox__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../createBox */ "./node_modules/@mui/system/esm/createBox.js");\n\n\nconst Box = (0,_createBox__WEBPACK_IMPORTED_MODULE_0__["default"])();\n true ? Box.propTypes /* remove-proptypes */ = {\n  // ----------------------------- Warning --------------------------------\n  // | These PropTypes are generated from the TypeScript type definitions |\n  // |     To update them edit the d.ts file and run "yarn proptypes"     |\n  // ----------------------------------------------------------------------\n  /**\n   * @ignore\n   */\n  children: (prop_types__WEBPACK_IMPORTED_MODULE_1___default().node),\n  /**\n   * The component used for the root node.\n   * Either a string to use a HTML element or a component.\n   */\n  component: (prop_types__WEBPACK_IMPORTED_MODULE_1___default().elementType),\n  /**\n   * The system prop that allows defining system overrides as well as additional CSS styles.\n   */\n  sx: prop_types__WEBPACK_IMPORTED_MODULE_1___default().oneOfType([prop_types__WEBPACK_IMPORTED_MODULE_1___default().arrayOf(prop_types__WEBPACK_IMPORTED_MODULE_1___default().oneOfType([(prop_types__WEBPACK_IMPORTED_MODULE_1___default().func), (prop_types__WEBPACK_IMPORTED_MODULE_1___default().object), (prop_types__WEBPACK_IMPORTED_MODULE_1___default().bool)])), (prop_types__WEBPACK_IMPORTED_MODULE_1___default().func), (prop_types__WEBPACK_IMPORTED_MODULE_1___default().object)])\n} : 0;\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Box);\n\n//# sourceURL=webpack://frontend/./node_modules/@mui/system/esm/Box/Box.js?')},"./src/components/NotificationList/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (/* binding */ NotificationList)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Menu/Menu.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/MenuItem/MenuItem.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Typography/Typography.js");\n/* harmony import */ var _mui_system__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @mui/system */ "./node_modules/@mui/system/esm/Box/Box.js");\n/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react-router-dom */ "./node_modules/react-router/dist/index.js");\n\n\n\n\n\nfunction NotificationList(props) {\n  const [notificationList, setNotificationList] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([]);\n  const [notificationFetch, setNotificationFetch] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)({});\n  const location = (0,react_router_dom__WEBPACK_IMPORTED_MODULE_1__.useLocation)();\n  async function NotificationListGet(recipient_id) {\n    const requestOptions = {\n      method: "GET",\n      headers: {\n        "Content-Type": "application/json"\n      }\n    };\n    await fetch("/message/notification/unread/list/get" + "?recipient_id=" + recipient_id, requestOptions).then(response => {\n      if (response.ok) {\n        response.json().then(data => {\n          setNotificationList(data.data);\n          props.setNotificationItems(createNotificationItems(data.data));\n        });\n      }\n    });\n  }\n  const formatDate = dateString => {\n    const date = new Date(dateString);\n    const today = new Date();\n\n    // Compare year, month, and day\n    if (date.getFullYear() === today.getFullYear() && date.getMonth() === today.getMonth() && date.getDate() === today.getDate()) {\n      // If the date is today, return only the time\n      return date.toTimeString().split(\' \')[0];\n    } else {\n      // If the date is not today, return only the date\n      return date.toISOString().split(\'T\')[0];\n    }\n  };\n  const createNotificationItems = notificationData => {\n    return notificationData.map(item => {\n      return {\n        id: item.mid,\n        text: item.text,\n        time: formatDate(item.create_time),\n        type: item.type,\n        author: item.author,\n        recipient: item.recipient,\n        url: `people/connection/?mid=${item.mid}&cpid=${item.connection}`\n      };\n    });\n  };\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    if (props.uid) {\n      NotificationListGet(props.uid);\n    }\n  }, [notificationFetch]);\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    // Toggle the flag whenever the location (URL) changes\n    setNotificationFetch(prev => !prev);\n  }, [location.pathname]);\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    const interval = setInterval(() => {\n      setNotificationFetch(prev => !prev);\n    }, 30000);\n\n    // Cleanup on unmount\n    return () => clearInterval(interval);\n  }, []);\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_2__["default"], {\n    id: "setting-menu",\n    anchorEl: props.notificationAnchorEl,\n    keepMounted: true,\n    open: Boolean(props.notificationAnchorEl),\n    onClose: () => props.setNotificationAnchorEl(null)\n  }, props.notificationItems.length > 0 ? props.notificationItems.map(item => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    key: item.id\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement("a", {\n    href: item.url\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_system__WEBPACK_IMPORTED_MODULE_4__["default"], {\n    display: "flex",\n    justifyContent: "space-between",\n    alignItems: "center"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    variant: "inherit",\n    style: {\n      fontSize: \'0.9rem\'\n    }\n  }, item.text), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_system__WEBPACK_IMPORTED_MODULE_4__["default"], {\n    mx: 1\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    variant: "inherit",\n    noWrap: true,\n    style: {\n      fontSize: \'0.9rem\'\n    }\n  }, item.time))))) : /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    key: "no-notification"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], {\n    variant: "inherit",\n    style: {\n      fontSize: \'0.9rem\'\n    }\n  }, "There is no new notification.")));\n}\n\n//# sourceURL=webpack://frontend/./src/components/NotificationList/index.js?')}}]);