/*! For license information please see src_pages_Report_ReportGenerators_index_js.js.LICENSE.txt */
"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([["src_pages_Report_ReportGenerators_index_js"],{"./src/pages/Report/ReportGenerators/CentralPosting/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (/* binding */ CentralPostingGenerator)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var dayjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! dayjs */ "./node_modules/dayjs/dayjs.min.js");\n/* harmony import */ var dayjs__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(dayjs__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../utils */ "./src/utils/index.js");\n\n\n\nconst reportGenerateUrl = \'/media/report/central-posting/\';\nfunction CentralPostingGenerator(reportData, format, uid, employerID) {\n  return new Promise(async (resolve, reject) => {\n    try {\n      const csrftoken = (0,_utils__WEBPACK_IMPORTED_MODULE_2__.getCookie)(\'csrftoken\');\n      const requestOptions = {\n        method: "POST",\n        headers: {\n          "Content-Type": "application/json",\n          \'X-CSRFToken\': csrftoken\n        },\n        body: JSON.stringify({\n          reportData: reportData,\n          format: format,\n          user_id: employerID,\n          author_id: uid\n        })\n      };\n      const response = await fetch(reportGenerateUrl, requestOptions);\n      const reportFile = await response.arrayBuffer();\n      const blob = new Blob([reportFile], {\n        type: format === "pdf" ? "application/pdf" : "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"\n      });\n      const downloadUrl = URL.createObjectURL(blob);\n\n      // Extract the filename from the Content-Disposition header\n      const contentDisposition = response.headers.get(\'Content-Disposition\');\n      let filename = "file";\n      if (contentDisposition) {\n        const filenameRegex = /filename[^;=\\n]*=(([\'"]).*?\\2|[^;\\n]*)/;\n        const matches = filenameRegex.exec(contentDisposition);\n        if (matches != null && matches[1]) {\n          filename = matches[1].replace(/[\'"]/g, \'\');\n        }\n      }\n      const downloadLink = document.createElement("a");\n      downloadLink.href = downloadUrl;\n      downloadLink.download = filename;\n      downloadLink.click();\n      URL.revokeObjectURL(downloadUrl);\n      resolve();\n    } catch (error) {\n      console.error("Failed to generate and download file:", error);\n      reject(error);\n    }\n  });\n}\n;\n\n//# sourceURL=webpack://frontend/./src/pages/Report/ReportGenerators/CentralPosting/index.js?')},"./src/pages/Report/ReportGenerators/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (/* binding */ reportGenerator)\n/* harmony export */ });\n/* harmony import */ var _CentralPosting__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./CentralPosting */ "./src/pages/Report/ReportGenerators/CentralPosting/index.js");\n\nconst central_posting_generator = async (dataList, rowsSelected, format, uid, employerID) => {\n  const reportData = dataList.filter(item => rowsSelected.includes(item.id));\n  await (0,_CentralPosting__WEBPACK_IMPORTED_MODULE_0__["default"])(reportData, format, uid, employerID);\n};\nconst reportGeneratorList = {\n  central_posting: central_posting_generator\n};\nfunction reportGenerator(id) {\n  return reportGeneratorList[id];\n}\n\n//# sourceURL=webpack://frontend/./src/pages/Report/ReportGenerators/index.js?')}}]);