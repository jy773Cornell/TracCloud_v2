/*! For license information please see src_pages_SprayCard_SprayCardEdit_index_js.js.LICENSE.txt */
"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([["src_pages_SprayCard_SprayCardEdit_index_js"],{"./src/pages/SprayCard/SprayCardEdit/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (/* binding */ SprayCardEdit)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _SprayCardCreate_SprayCardForm__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../SprayCardCreate/SprayCardForm */ "./src/pages/SprayCard/SprayCardCreate/SprayCardForm.js");\n\n\n\nconst field_names = ["chemical_purchase", "decision_support", "crop", "target", "site", "assign_to", "applied_area", "gallons_water_rate", "application_rate", "partial_treatment", "alt_row_middle", "responsible_person", "growth_stage"];\nfunction SprayCardEdit({\n  uid,\n  sprayData,\n  sprayOptions,\n  sprayCardContents,\n  refreshRecord,\n  editSprayCard,\n  setEditSprayCard,\n  setRefreshRecord,\n  setAssignSprayCard,\n  sprayCardSelected,\n  privilege\n}) {\n  const initialFieldValues = field_names.reduce((acc, cur) => {\n    if ([field_names[5], field_names[11]].includes(cur)) {\n      acc[cur] = "";\n    } else {\n      acc[cur] = {};\n    }\n    return acc;\n  }, {});\n  const [fieldValues, setFieldValues] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(initialFieldValues);\n  const [selectedResponsible, setSelectedResponsible] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)("");\n  const updateInitialEditFields = () => {\n    let initialFieldValues = field_names.reduce((acc, cur) => {\n      if ([field_names[5], field_names[7], field_names[11]].includes(cur)) {\n        acc[cur] = "";\n      } else {\n        acc[cur] = {};\n      }\n      return acc;\n    }, {});\n    const previousChemicalContents = [...new Map(sprayCardContents.map(item => [JSON.stringify(item.chemical_purchase), item.chemical_purchase])).values()];\n    const preGallonsWater = previousChemicalContents.map(item => sprayCardContents.find(spray => JSON.stringify(spray.chemical_purchase) === JSON.stringify(item)).gallons_water_rate);\n    const preApplicationRate = previousChemicalContents.map(item => sprayCardContents.find(spray => JSON.stringify(spray.chemical_purchase) === JSON.stringify(item)).application_rate);\n    const previousDecision = previousChemicalContents.map(item => sprayCardContents.find(spray => JSON.stringify(spray.chemical_purchase) === JSON.stringify(item)).decision_support);\n    for (let i = 0; i < previousChemicalContents.length; i++) {\n      initialFieldValues[field_names[0]][i] = sprayOptions.chemicalOptions.find(option => option.id === previousChemicalContents[i].id);\n      initialFieldValues[field_names[1]][i] = sprayOptions.decisionSupportOptions.find(option => option.id === previousDecision[i].id);\n      initialFieldValues[field_names[8]][i] = preApplicationRate[i];\n    }\n    initialFieldValues[field_names[7]] = preGallonsWater[0];\n    const previousCrops = [...new Map(sprayCardContents.map(item => [JSON.stringify(item.crop), item.crop])).values()];\n    const previousTargets = previousCrops.map(item => sprayCardContents.find(spray => JSON.stringify(spray.crop) === JSON.stringify(item)).target);\n    for (let i = 0; i < previousCrops.length; i++) {\n      initialFieldValues[field_names[2]][i] = sprayOptions.cropOptions.find(option => option.id === previousCrops[i].id);\n      initialFieldValues[field_names[3]][i] = sprayOptions.targetOptions.find(option => option.id === previousTargets[i].id);\n    }\n    const preSites = [...new Map(sprayCardContents.map(item => [JSON.stringify(item.site), item.site])).values()];\n    const preAppliedArea = preSites.map(item => sprayCardContents.find(spray => JSON.stringify(spray.site) === JSON.stringify(item)).applied_area);\n    const prePartialTreatment = preSites.map(item => sprayCardContents.find(spray => JSON.stringify(spray.site) === JSON.stringify(item)).partial_treatment);\n    const preAltRowMiddle = preSites.map(item => sprayCardContents.find(spray => JSON.stringify(spray.site) === JSON.stringify(item)).alt_row_middle);\n    const preGrowthStage = preSites.map(item => sprayCardContents.find(spray => JSON.stringify(spray.site) === JSON.stringify(item)).growth_stage);\n    for (let i = 0; i < preSites.length; i++) {\n      initialFieldValues[field_names[4]][i] = sprayOptions.siteOptions.find(option => option.id === preSites[i].id);\n      initialFieldValues[field_names[6]][i] = preAppliedArea[i];\n      initialFieldValues[field_names[9]][i] = prePartialTreatment[i];\n      initialFieldValues[field_names[10]][i] = preAltRowMiddle[i];\n      initialFieldValues[field_names[12]][i] = sprayOptions.growthStageOptions.find(option => option.id === preGrowthStage[i]);\n    }\n    const preResponsible = sprayOptions.assigneeOptions.find(option => option.label === sprayCardContents[0].responsible_person);\n    setSelectedResponsible(preResponsible);\n    initialFieldValues[field_names[11]] = preResponsible.id;\n    return initialFieldValues;\n  };\n  const sprayCardFormProps = {\n    uid,\n    openSprayCard: editSprayCard,\n    setOpenSprayCard: setEditSprayCard,\n    sprayData,\n    sprayOptions,\n    refreshRecord,\n    setRefreshRecord,\n    setAssignSprayCard,\n    sprayCardSelected,\n    setSprayCardSelected: null,\n    fieldValues,\n    setFieldValues,\n    initialFieldValues,\n    field_names,\n    selectedResponsible,\n    setSelectedResponsible,\n    tag: "edit",\n    privilege\n  };\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    if (sprayCardContents.length > 0) {\n      setFieldValues(updateInitialEditFields());\n    }\n  }, [sprayCardContents, editSprayCard]);\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_SprayCardCreate_SprayCardForm__WEBPACK_IMPORTED_MODULE_1__["default"], sprayCardFormProps);\n}\n\n//# sourceURL=webpack://frontend/./src/pages/SprayCard/SprayCardEdit/index.js?')}}]);