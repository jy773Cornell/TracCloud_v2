"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[2939],{2939:(e,t,n)=>{n.r(t),n.d(t,{default:()=>u});var a=n(1504),o=n.n(a),i=n(3284),r=n(2528),s=n(8576);const c=(0,a.lazy)((()=>Promise.all([n.e(3992),n.e(6632),n.e(1640),n.e(3964),n.e(1056)]).then(n.bind(n,8676)))),l=(0,a.lazy)((()=>Promise.all([n.e(1640),n.e(8411)]).then(n.bind(n,8411))));function u({uid:e,setUID:t,employerID:n,setEmployerID:u,privilege:d,setPrivilege:h,relationType:p,setRelationType:y,userType:m,SetUserType:f,username:g,setUsername:T}){const[k,E]=(0,a.useState)("loading"),[v,w]=(0,a.useState)(!1);async function C(e){await fetch("/user_manage/employer/get/?uid="+e,{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>{e.ok&&e.json().then((e=>{u(e.employer_id)}))}))}async function j(e){await fetch("/user_manage/privilege/get/?uid="+e,{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>{e.ok&&e.json().then((e=>{h(e.data)}))}))}(0,a.useEffect)((()=>{!async function(){const e={method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":(0,r.U$)("csrftoken")},body:JSON.stringify({token:(0,r.uE)()})};await fetch("/api/auth/",e).then((async e=>{e.ok?e.json().then((async e=>{t(e.uid),y(e.relation_type),f(e.type),T(e.username),"Admin"===e.type?window.location.href="admin":(await Promise.all([C(e.uid),j(e.uid)]),E("authorized"))})):E("unauthorized")}))}()}),[]);const z={uid:e,username:g,relationType:p,userType:m};return"loading"===k?o().createElement(c,null):"authorized"===k?o().createElement(s.K.Provider,{value:{notificationFetch:v,toggleNotificationFetch:()=>w((e=>!e))}},o().createElement(l,z)):"unauthorized"===k?o().createElement(i.YX,{to:"/login",replace:!0}):void 0}},8576:(e,t,n)=>{n.d(t,{K:()=>o});var a=n(1504);const o=n.n(a)().createContext({notificationFetch:!1,toggleNotificationFetch:()=>{}})}}]);