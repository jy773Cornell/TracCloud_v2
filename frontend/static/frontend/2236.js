"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[2236],{2060:(e,t,n)=>{n.d(t,{c:()=>i});var l=n(1504),r=n(1940),a=n(6864),c=n(8857),o=n(6968);function i(e){return l.createElement(a.cp,{open:Boolean(e.anchorEl),anchorEl:e.anchorEl,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},l.createElement(o.c,{sx:{p:1,maxWidth:400}},l.createElement(c.c,{variant:"body1"},e.msg),l.createElement(r.c,{onClick:()=>{"delete"===e.type?(e.setAnchorEl(null),e.onDeleteClicked(e.params)):"update"===e.type&&(e.setAnchorEl(null),e.onSaveClicked())},color:"primary"},"Yes"),l.createElement(r.c,{onClick:()=>e.setAnchorEl(null),color:"secondary"},"No")))}},8576:(e,t,n)=>{n.d(t,{K:()=>r});var l=n(1504);const r=n.n(l)().createContext({notificationFetch:!1,toggleNotificationFetch:()=>{}})},7600:(e,t,n)=>{n.r(t),n.d(t,{default:()=>s});var l=n(1504),r=n(6988),a=n(6350),c=n(4408);function o(){return o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var l in n)Object.prototype.hasOwnProperty.call(n,l)&&(e[l]=n[l])}return e},o.apply(this,arguments)}const i=l.forwardRef((function(e,t){return l.createElement(c.c,o({elevation:6,ref:t,variant:"filled"},e))}));function s(e){const t=(t,n)=>{"clickaway"!==n&&e.setOpen(!1)};return l.createElement(r.c,{spacing:2,sx:{width:"100%"}},l.createElement(a.c,{open:e.open,autoHideDuration:6e3,onClose:t},(()=>{switch(e.tag){case"success":return l.createElement(i,{onClose:t,severity:"success",sx:{width:"100%"}},e.msg);case"error":return l.createElement(i,{onClose:t,severity:"error",sx:{width:"100%"}},e.msg);case"warning":return l.createElement(i,{onClose:t,severity:"warning",sx:{width:"100%"}},e.msg);default:return null}})()))}},2236:(e,t,n)=>{n.r(t),n.d(t,{default:()=>v});var l=n(1504),r=n(6968),a=n(3083),c=n(8604),o=n(8388),i=n(4024),s=n(5466),d=n(9440),u=n(3562),m=n(5444),h=n(9700),f=n(2060),p=n(2528),E=n(7600),g=n(3284),w=n(8364),y=n(8576);function C(){return l.createElement(a.q,null,l.createElement(c.S,null),l.createElement(o.e,null),l.createElement(i.a,null),l.createElement(s.Wc,null))}function v({employerID:e,privilege:t,refreshRecord:n,setRefreshRecord:a,openFileWindow:c,setOpenFileWindow:o,selectedUser:i,setSelectedUser:s,relationType:v}){const{notificationFetch:_,toggleNotificationFetch:k}=(0,l.useContext)(y.K),[b,N]=(0,l.useState)([]),[S,O]=(0,l.useState)([]),[T,x]=(0,l.useState)(!1),[F,R]=(0,l.useState)(!1),[j,D]=(0,l.useState)(null),[U,A]=(0,l.useState)(null),P=(0,g.IT)();async function W(e){t.client_r&&await fetch("/user_manage/client_or_vendor/list/get/?uid="+e,{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>{e.ok&&e.json().then((e=>{const t=e.data;N(t);const n=t.map((e=>q(e)));O(n)}))}))}const $=async t=>{!async function(e,t){const l={requester_id:e,client_vendor_id:t};console.log(l);const r={method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":(0,p.U$)("csrftoken")},body:JSON.stringify(l)};await fetch("/user_manage/client_or_vendor/connection/delete/",r).then((e=>{e.ok&&(R(!0),a(~n))}))}(e,t.id)},q=e=>{for(let t in e)null===e[t]&&(e[t]="");return{id:e.uid,user:e.user,business_name:e.business_name,name:`${e.first_name} ${e.last_name}`,type:e.type,email:e.email,cell_phone:e.cell_phone}},z=150,B=[{field:"operations",headerName:"Operations",width:z,renderCell:e=>l.createElement(l.Fragment,null,l.createElement(u.c,{onClick:()=>(e=>{o(!0),s(e.id)})(e)},"Client"===v?l.createElement(w.c,null):l.createElement(m.c,null)),l.createElement(u.c,{onClick:t=>{D(t.currentTarget),A(e.id)},disabled:!t.client_d},l.createElement(h.c,null)),U===e.id&&l.createElement(f.c,{anchorEl:j,setAnchorEl:D,onDeleteClicked:$,params:e,msg:"Delete this connection?",type:"delete"}))},{field:"user",headerName:"Client"===v?"Vendor User":"Client User",width:z},{field:"business_name",headerName:"Business Name",width:250},{field:"name",headerName:"Name",width:200},{field:"type",headerName:"Type",width:z},{field:"email",headerName:"Email",width:250},{field:"cell_phone",headerName:"Cell Phone",width:z}];(0,l.useEffect)((()=>{(async()=>{await Promise.all([W(e)])})(),x(!0)}),[]),(0,l.useEffect)((()=>{T&&W(e)}),[n,_]),(0,l.useEffect)((()=>{a((e=>!e))}),[P.pathname]);const I={open:F,setOpen:R,msg:"The connection is deleted!",tag:"success"};return l.createElement("div",null,l.createElement(r.c,{style:{height:900}},l.createElement(d.o,{columns:B,rows:S,disableRowSelectionOnClick:!0,disableClickEdit:!0,rowSelection:!1,slots:{toolbar:C},localeText:{noRowsLabel:t.client_r?"No rows":"You don't have the privilege to access this data"}})),l.createElement(E.default,I))}}}]);