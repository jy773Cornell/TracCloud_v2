"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[124],{7516:(e,t,n)=>{n.d(t,{c:()=>_});var r=n(5072),c=n(5656),o=n(1504),s=n(3268),a=n.n(s),l=n(4971),i=n(4048),p=n(5664),d=n(6940),u=n(440),m=n(6968),f=n(7100),y=n(1272);function h(e){return(0,y.c)("MuiCard",e)}(0,f.c)("MuiCard",["root"]);var C=n(7624);const g=["className","raised"],v=(0,d.cp)(m.c,{name:"MuiCard",slot:"Root",overridesResolver:(e,t)=>t.root})((()=>({overflow:"hidden"}))),E=o.forwardRef((function(e,t){const n=(0,u.c)({props:e,name:"MuiCard"}),{className:o,raised:s=!1}=n,a=(0,c.c)(n,g),i=(0,r.c)({},n,{raised:s}),d=(e=>{const{classes:t}=e;return(0,p.c)({root:["root"]},h,t)})(i);return(0,C.jsx)(v,(0,r.c)({className:(0,l.c)(d.root,o),elevation:s?8:void 0,ref:t,ownerState:i},a))}));E.propTypes={children:a().node,classes:a().object,className:a().string,raised:(0,i.c)(a().bool,(e=>e.raised&&"outlined"===e.variant?new Error('MUI: Combining `raised={true}` with `variant="outlined"` has no effect.'):null)),sx:a().oneOfType([a().arrayOf(a().oneOfType([a().func,a().object,a().bool])),a().func,a().object])};const _=E},4477:(e,t,n)=>{n.d(t,{c:()=>v});var r=n(5072),c=n(5656),o=n(1504),s=n(3268),a=n.n(s),l=n(4971),i=n(5664),p=n(6940),d=n(440),u=n(7100),m=n(1272);function f(e){return(0,m.c)("MuiCardContent",e)}(0,u.c)("MuiCardContent",["root"]);var y=n(7624);const h=["className","component"],C=(0,p.cp)("div",{name:"MuiCardContent",slot:"Root",overridesResolver:(e,t)=>t.root})((()=>({padding:16,"&:last-child":{paddingBottom:24}}))),g=o.forwardRef((function(e,t){const n=(0,d.c)({props:e,name:"MuiCardContent"}),{className:o,component:s="div"}=n,a=(0,c.c)(n,h),p=(0,r.c)({},n,{component:s}),u=(e=>{const{classes:t}=e;return(0,i.c)({root:["root"]},f,t)})(p);return(0,y.jsx)(C,(0,r.c)({as:s,className:(0,l.c)(u.root,o),ownerState:p,ref:t},a))}));g.propTypes={children:a().node,classes:a().object,className:a().string,component:a().elementType,sx:a().oneOfType([a().arrayOf(a().oneOfType([a().func,a().object,a().bool])),a().func,a().object])};const v=g},928:(e,t,n)=>{n.d(t,{c:()=>E});var r=n(5656),c=n(5072),o=n(1504),s=n(3268),a=n.n(s),l=n(4971),i=n(5664),p=n(6940),d=n(440),u=n(8857),m=n(7100),f=n(1272);function y(e){return(0,f.c)("MuiDialogContentText",e)}(0,m.c)("MuiDialogContentText",["root"]);var h=n(7624);const C=["children","className"],g=(0,p.cp)(u.c,{shouldForwardProp:e=>(0,p.CU)(e)||"classes"===e,name:"MuiDialogContentText",slot:"Root",overridesResolver:(e,t)=>t.root})({}),v=o.forwardRef((function(e,t){const n=(0,d.c)({props:e,name:"MuiDialogContentText"}),{className:o}=n,s=(0,r.c)(n,C),a=(e=>{const{classes:t}=e,n=(0,i.c)({root:["root"]},y,t);return(0,c.c)({},t,n)})(s);return(0,h.jsx)(g,(0,c.c)({component:"p",variant:"body1",color:"text.secondary",ref:t,ownerState:s,className:(0,l.c)(a.root,o)},n,{classes:a}))}));v.propTypes={children:a().node,classes:a().object,className:a().string,sx:a().oneOfType([a().arrayOf(a().oneOfType([a().func,a().object,a().bool])),a().func,a().object])};const E=v},7729:(e,t,n)=>{n.d(t,{c:()=>v});var r=n(5072),c=n(5656),o=n(1504),s=n(3268),a=n.n(s),l=n(4971),i=n(5664),p=n(8857),d=n(6940),u=n(440),m=n(5132),f=n(8736),y=n(7624);const h=["className","id"],C=(0,d.cp)(p.c,{name:"MuiDialogTitle",slot:"Root",overridesResolver:(e,t)=>t.root})({padding:"16px 24px",flex:"0 0 auto"}),g=o.forwardRef((function(e,t){const n=(0,u.c)({props:e,name:"MuiDialogTitle"}),{className:s,id:a}=n,p=(0,c.c)(n,h),d=n,g=(e=>{const{classes:t}=e;return(0,i.c)({root:["root"]},m.G,t)})(d),{titleId:v=a}=o.useContext(f.c);return(0,y.jsx)(C,(0,r.c)({component:"h2",className:(0,l.c)(g.root,s),ownerState:d,ref:t,variant:"h6",id:null!=a?a:v},p))}));g.propTypes={children:a().node,classes:a().object,className:a().string,id:a().string,sx:a().oneOfType([a().arrayOf(a().oneOfType([a().func,a().object,a().bool])),a().func,a().object])};const v=g},7600:(e,t,n)=>{n.r(t),n.d(t,{default:()=>i});var r=n(1504),c=n(6988),o=n(6350),s=n(4408);function a(){return a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a.apply(this,arguments)}const l=r.forwardRef((function(e,t){return r.createElement(s.c,a({elevation:6,ref:t,variant:"filled"},e))}));function i(e){const t=(t,n)=>{"clickaway"!==n&&e.setOpen(!1)};return r.createElement(c.c,{spacing:2,sx:{width:"100%"}},r.createElement(o.c,{open:e.open,autoHideDuration:6e3,onClose:t},(()=>{switch(e.tag){case"success":return r.createElement(l,{onClose:t,severity:"success",sx:{width:"100%"}},e.msg);case"error":return r.createElement(l,{onClose:t,severity:"error",sx:{width:"100%"}},e.msg);case"warning":return r.createElement(l,{onClose:t,severity:"warning",sx:{width:"100%"}},e.msg);default:return null}})()))}},124:(e,t,n)=>{n.r(t),n.d(t,{default:()=>_});var r=n(1504),c=n.n(r),o=n(5984),s=n(7516),a=n(4477),l=n(3964),i=n(1940),p=n(5084),d=n(3640),u=n(7729),m=n(2576),f=n(928),y=n(3328),h=n(2528),C=n(7600),g=n(8130);const v=(0,r.lazy)((()=>n.e(5600).then(n.bind(n,5600)))),E={business_u:"Edit Business Profile",employee_c:"Create Employee",employee_r:"Access Employee",employee_d:"Delete Employee",client_add:"Add Client",client_r:"Access Client",client_d:"Delete Client",privilege_set:"Set Privilege",crop_c:"Create Crop",crop_r:"Access Crop",crop_u:"Update Crop",crop_d:"Delete Crop",site_c:"Create Site",site_r:"Access Site",site_u:"Update Site",site_d:"Delete Site",chem_c:"Create Chemical",chem_r:"Access Chemical",chem_u:"Update Chemical",chem_d:"Delete Chemical",purchase_c:"Create Purchase",purchase_r:"Access Purchase",purchase_u:"Update Purchase",purchase_d:"Delete Purchase",equip_c:"Create Equipment",equip_r:"Access Equipment",equip_u:"Update Equipment",equip_d:"Delete Equipment",spray_r:"Access Spray Record",spray_u:"Update Spray Record",spraycard_c:"Create Spray Card",spraycard_a:"Assign Spray Card",report_c:"Create Report",report_r:"Access Report",report_d:"Delete Report"};function _({privilege:e,employerID:t,refreshRecord:n,setRefreshRecord:_,settingFormOpen:x,setSettingFormOpen:b,selectedEmployee:j}){const[w,T]=(0,r.useState)(!1),[O,S]=c().useState([]),[R,k]=c().useState([]),[D,A]=(0,r.useState)(!1),[N,M]=(0,r.useState)(!1),[U,P]=(0,r.useState)(!1),[q,F]=(0,r.useState)(!1);async function I(e){await fetch("/user_manage/privilege/get/?uid="+e,{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>{e.ok&&e.json().then((e=>{T(e.data)}))}))}const z=()=>{let e={};return O.map((t=>{e[Object.keys(E).find((e=>E[e]===t))]=!1})),R.map((t=>{e[Object.keys(E).find((e=>E[e]===t))]=!0})),e};(0,r.useEffect)((()=>{j&&I(j.uid)}),[j]),(0,r.useEffect)((()=>{w&&(()=>{let e=[],t=[];Object.keys(E).map((n=>{w[n]?t.push(E[n]):e.push(E[n])})),S(e),k(t)})()}),[w,x]);const B={open:D,setOpen:A,msg:"The employee has already been deleted from your business.",tag:"success"},G={open:N,setOpen:M,msg:"The privilege setting for this employee has been updated.",tag:"success"},J={left:O,setLeft:S,right:R,setRight:k,privilege:e};return c().createElement(c().Fragment,null,c().createElement(o.c,{open:x,sx:{display:"flex",justifyContent:"center",alignItems:"center"}},c().createElement("div",null,c().createElement(s.c,{sx:{width:800}},c().createElement(a.c,null,c().createElement(l.cp,{container:!0,justifyContent:"center",spacing:2},c().createElement(l.cp,{item:!0,xs:12,sx:{textAlign:"center"}},c().createElement("h1",{style:{marginBottom:"0"}},"Employee Setting "),c().createElement("h3",{style:{marginTop:"5px"}},null==j?void 0:j.user," (",null==j?void 0:j.first_name," ",null==j?void 0:j.last_name,")")),c().createElement(l.cp,{item:!0,xs:12,sx:{justifyContent:"center",textAlign:"center"}},c().createElement(v,J)),c().createElement(l.cp,{item:!0,xs:4,sx:{justifyContent:"center",textAlign:"center"}},c().createElement(i.c,{variant:"contained",color:"secondary",onClick:()=>b(!1)},"Close")),c().createElement(l.cp,{item:!0,xs:4,sx:{justifyContent:"center",textAlign:"center"}},c().createElement(i.c,{variant:"contained",color:"success",onClick:()=>(async()=>{await async function(e){const t={user_id:e,...z()};console.log(t);const n={method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":(0,h.U$)("csrftoken")},body:JSON.stringify(t)};await fetch("/user_manage/privilege/update/",n).then((e=>{e.ok&&M(!0)}))}(j.uid),I(j.uid)})(),disabled:!e.privilege_set},"Update")),c().createElement(l.cp,{item:!0,xs:4,sx:{justifyContent:"center",textAlign:"center"}},c().createElement(i.c,{variant:"contained",color:"primary",onClick:()=>P(!0),disabled:!e.employee_d},"Delete"))))),c().createElement(p.c,{sx:{zIndex:e=>e.zIndex.drawer+1},open:q},c().createElement(g.c,{color:"inherit"})))),c().createElement(d.c,{open:U},c().createElement(u.c,null,"Confirm Delete"),c().createElement(m.c,null,c().createElement(f.c,null,"Are you sure you want to delete this employee? All the related contents will be removed.")),c().createElement(y.c,null,c().createElement(i.c,{onClick:()=>P(!1),color:"primary"},"Cancel"),c().createElement(i.c,{onClick:()=>{!async function(e,t){F(!0);const r={employer_id:e,employee_id:t};console.log(r);const c={method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":(0,h.U$)("csrftoken")},body:JSON.stringify(r)};await fetch("/user_manage/employee/delete/",c).then((e=>{e.ok&&(b(!1),A(!0),_(~n)),F(!1)}))}(t,j.uid),P(!1)},color:"secondary"},"Delete"))),c().createElement(C.default,B),c().createElement(C.default,G))}}}]);