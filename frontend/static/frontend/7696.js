"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[7696],{2060:(e,t,n)=>{n.d(t,{c:()=>o});var a=n(1504),r=n(1940),l=n(6864),i=n(8857),c=n(6968);function o(e){return a.createElement(l.cp,{open:Boolean(e.anchorEl),anchorEl:e.anchorEl,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},a.createElement(c.c,{sx:{p:1,maxWidth:400}},a.createElement(i.c,{variant:"body1"},e.msg),a.createElement(r.c,{onClick:()=>{"delete"===e.type?(e.setAnchorEl(null),e.onDeleteClicked(e.params)):"update"===e.type&&(e.setAnchorEl(null),e.onSaveClicked())},color:"primary"},"Yes"),a.createElement(r.c,{onClick:()=>e.setAnchorEl(null),color:"secondary"},"No")))}},7600:(e,t,n)=>{n.r(t),n.d(t,{default:()=>s});var a=n(1504),r=n(6988),l=n(6350),i=n(4408);function c(){return c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},c.apply(this,arguments)}const o=a.forwardRef((function(e,t){return a.createElement(i.c,c({elevation:6,ref:t,variant:"filled"},e))}));function s(e){const t=(t,n)=>{"clickaway"!==n&&e.setOpen(!1)};return a.createElement(r.c,{spacing:2,sx:{width:"100%"}},a.createElement(l.c,{open:e.open,autoHideDuration:6e3,onClose:t},(()=>{switch(e.tag){case"success":return a.createElement(o,{onClose:t,severity:"success",sx:{width:"100%"}},e.msg);case"error":return a.createElement(o,{onClose:t,severity:"error",sx:{width:"100%"}},e.msg);case"warning":return a.createElement(o,{onClose:t,severity:"warning",sx:{width:"100%"}},e.msg);default:return null}})()))}},7696:(e,t,n)=>{n.r(t),n.d(t,{default:()=>he});var a=n(1504),r=n(6968),l=n(3562),i=n(3704),c=n(3683),o=n(9700),s=n(9972),d=n(108),u=n(8880),p=n(4632),m=n(4180),h=n(5404),f=n(5984),E=n(7516),v=n(4477),g=n(3964),y=n(4660),b=n(3604),C=n(1940),w=n(6060),x=n(3628),S=n(1348),k=n(7668),O=n(9440);const I=(0,w.c)(C.c)((()=>({margin:"15px",backgroundColor:x.c[500],"&:hover":{backgroundColor:x.c[700]}}))),q=(0,w.c)(C.c)((()=>({margin:"15px 0px",backgroundColor:S.c[500],"&:hover":{backgroundColor:S.c[700]}}))),_=(0,w.c)("div")({display:"flex",flexDirection:"row",flexGrow:1}),j=(0,w.c)(O.o)((()=>({"& .site-type-level--1":{backgroundColor:k.c[300],"&:hover":{backgroundColor:k.c[400]}},"& .site-type-level--2":{backgroundColor:k.c[200],"&:hover":{backgroundColor:k.c[200]}},"& .site-type-level--3":{backgroundColor:k.c[100],"&:hover":{backgroundColor:k.c[100]}},"& .site-type-level--4":{backgroundColor:k.c[50],"&:hover":{backgroundColor:k.c[50]}}})));var z=n(7600),T=n(3083),N=n(8604),P=n(8388),R=n(4024),A=n(5466),U=n(2060),M=n(5028),G=n(5564),D=n(2438),L=n(9276),$=n(3268),F=n.n($),H=n(6940),W=n(7728),B=n(8832),J=n(2516),X=n(2768);function Y(){return Y=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Y.apply(this,arguments)}function V(e){const t=(0,D.cl)({from:{opacity:0,transform:"translate3d(20px,0,0)"},to:{opacity:e.in?1:0,transform:`translate3d(${e.in?0:20}px,0,0)`}});return a.createElement(D.Ih.div,{style:t},a.createElement(L.c,e))}V.propTypes={in:F().bool};const K=(0,H.cp)((e=>a.createElement(B.c,Y({},e,{TransitionComponent:V}))))((({theme:e})=>({[`& .${J.c.iconContainer}`]:{"& .close":{opacity:.3}},[`& .${J.c.group}`]:{marginLeft:15,paddingLeft:18,borderLeft:`1px dashed ${(0,W.W4)(e.palette.text.primary,.4)}`}})));function Q(e){return a.createElement(X.c,Y({fontSize:"inherit",style:{width:14,height:14}},e),a.createElement("path",{d:"M22.047 22.074v0 0-20.147 0h-20.12v0 20.147 0h20.12zM22.047 24h-20.12q-.803 0-1.365-.562t-.562-1.365v-20.147q0-.776.562-1.351t1.365-.575h20.147q.776 0 1.351.575t.575 1.351v20.147q0 .803-.575 1.365t-1.378.562v0zM17.873 11.023h-11.826q-.375 0-.669.281t-.294.682v0q0 .401.294 .682t.669.281h11.826q.375 0 .669-.281t.294-.682v0q0-.401-.294-.682t-.669-.281z"}))}function Z(e){return a.createElement(X.c,Y({fontSize:"inherit",style:{width:14,height:14}},e),a.createElement("path",{d:"M22.047 22.074v0 0-20.147 0h-20.12v0 20.147 0h20.12zM22.047 24h-20.12q-.803 0-1.365-.562t-.562-1.365v-20.147q0-.776.562-1.351t1.365-.575h20.147q.776 0 1.351.575t.575 1.351v20.147q0 .803-.575 1.365t-1.378.562v0zM17.873 12.977h-4.923v4.896q0 .401-.281.682t-.682.281v0q-.375 0-.669-.281t-.294-.682v-4.896h-4.923q-.401 0-.682-.294t-.281-.669v0q0-.401.281-.682t.682-.281h4.923v-4.896q0-.401.294-.682t.669-.281v0q.401 0 .682.281t.281.682v4.896h4.923q.401 0 .682.281t.281.682v0q0 .375-.281.669t-.682.294z"}))}function ee(e){return a.createElement(X.c,Y({className:"close",fontSize:"inherit",style:{width:14,height:14}},e),a.createElement("path",{d:"M17.485 17.512q-.281.281-.682.281t-.696-.268l-4.12-4.147-4.12 4.147q-.294.268-.696.268t-.682-.281-.281-.682.294-.669l4.12-4.147-4.12-4.147q-.294-.268-.294-.669t.281-.682.682-.281.696 .268l4.12 4.147 4.12-4.147q.294-.268.696-.268t.682.281 .281.669-.294.682l-4.12 4.147 4.12 4.147q.294.268 .294.669t-.281.682zM22.047 22.074v0 0-20.147 0h-20.12v0 20.147 0h20.12zM22.047 24h-20.12q-.803 0-1.365-.562t-.562-1.365v-20.147q0-.776.562-1.351t1.365-.575h20.147q.776 0 1.351.575t.575 1.351v20.147q0 .803-.575 1.365t-1.378.562v0z"}))}function te(e){const[t,n]=a.useState([]),l=e=>e.reduce(((e,t)=>(t.children&&t.children.length>0&&(e.push(t.sid),e.push(...l(t.children))),e)),[]),i=e=>a.createElement(K,{key:e.sid,nodeId:e.sid.toString(),label:e.type+" - "+e.name},Array.isArray(e.children)?e.children.map((e=>i(e))):null);return a.createElement(r.c,{sx:{height:"100%",width:250,marginLeft:"15px"}},a.createElement(G.c,{sx:{maxHeight:400,flexGrow:1,width:250,overflowY:"auto"}},a.createElement(G.c,{sx:{mb:1,margin:"0px"}},a.createElement(C.c,{onClick:()=>{n((t=>0===t.length?l(e.siteList):[]))}},0===t.length?"Expand all":"Collapse all")),a.createElement(M.c,{"aria-label":"customized",defaultExpanded:[],defaultCollapseIcon:a.createElement(Q,null),defaultExpandIcon:a.createElement(Z,null),defaultEndIcon:a.createElement(ee,null),expanded:t,onNodeToggle:(e,t)=>{n(t)},sx:{flexGrow:1,width:250}},e.siteList.map((e=>i(e))))))}var ne=n(2528);function ae(){return ae=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},ae.apply(this,arguments)}const re=200,le=180,ie=["type","name","crop","size","size_unit","gps","gps_system"],ce=["Row","Hole Code#","Section",""],oe=["Row","Hole Code#","Section","Block"],se="create_add_row_data";function de(e){const{type:t,crop:n,size_unit:a,...r}=e;return{type_id:t,crop_id:n,size_unit_id:a,...r}}function ue(e){for(let t in e)null===e[t]&&(e[t]="");return{id:e.sid,type:e.type,name:e.name,crop:e.crop?e.crop.crop+" ("+e.crop.variety+")":"",size:e.size,size_unit:e.size_unit,gps:e.gps,gps_system:e.gps_system,children:e.children,update_time:e.update_time}}function pe(){return a.createElement(T.q,null,a.createElement(N.S,null),a.createElement(P.e,null),a.createElement(R.a,null),a.createElement(A.Wc,null))}function me({fieldValues:e,formData:t,columns:n,siteTypeOptions:r,unitOptions:l,handleInputChange:i,showAddModal:c,setShowAddModal:o,setIsSave:s,inputError:d,updateInputError:u,SiteRecordSave:p,refreshRecord:m,setRefreshRecord:h}){return a.createElement(f.c,{open:c,sx:{display:"flex",justifyContent:"center",alignItems:"center"}},a.createElement(E.c,{sx:{width:400}},a.createElement(v.c,null,a.createElement(g.cp,{container:!0,justifyContent:"center",spacing:2},a.createElement(g.cp,{item:!0,xs:12,sx:{textAlign:"center"}},a.createElement("h1",null,"Add Site Record")),a.createElement(g.cp,{item:!0,xs:12},a.createElement(y.c,{options:r||[],onChange:(e,t)=>{i(e,t,ie[0])},renderInput:e=>a.createElement(b.c,ae({},e,{required:!0,variant:"outlined",label:n[1].headerName,error:d[ie[0]]}))})),a.createElement(g.cp,{item:!0,xs:12},a.createElement(b.c,{error:d[ie[1]],required:!0,fullWidth:!0,variant:"outlined",label:n[2].headerName,onChange:e=>{i(e,e.target.value,ie[1])}})),a.createElement(g.cp,{item:!0,xs:6},a.createElement(b.c,{variant:"outlined",label:n[4].headerName,onChange:e=>{i(e,e.target.value,ie[3])}})),a.createElement(g.cp,{item:!0,xs:6},a.createElement(y.c,{options:l||[],onChange:(e,t)=>{i(e,t,ie[4])},renderInput:e=>a.createElement(b.c,ae({},e,{variant:"outlined",label:n[5].headerName}))})),a.createElement(g.cp,{item:!0,xs:6},a.createElement(b.c,{variant:"outlined",label:n[6].headerName,onChange:e=>{i(e,e.target.value,ie[5])}})),a.createElement(g.cp,{item:!0,xs:6},a.createElement(b.c,{variant:"outlined",label:n[7].headerName,onChange:e=>{i(e,e.target.value,ie[6])}})),a.createElement(g.cp,{item:!0,xs:6,sx:{justifyContent:"center",textAlign:"center"}},a.createElement(C.c,{variant:"contained",color:"secondary",onClick:()=>o(!1)},"Cancel")),a.createElement(g.cp,{item:!0,xs:6,sx:{justifyContent:"center",textAlign:"center"}},a.createElement(C.c,{variant:"contained",color:"success",onClick:()=>{[e[ie[0]],e[ie[1]]].every((e=>""!==e))?p():u()}},"Save"))))))}function he(e){e.uid;const t=e.employerID,n=e.privilege,[f,E]=(0,a.useState)([]),[v,g]=(0,a.useState)([]),[C,w]=(0,a.useState)([]),[x,S]=(0,a.useState)([]),[k,O]=(0,a.useState)([]),[T,N]=(0,a.useState)({}),[P,R]=(0,a.useState)({}),[A,M]=(0,a.useState)({}),[G,D]=(0,a.useState)([]),[L,$]=(0,a.useState)([]),[F,H]=(0,a.useState)([]),[W,B]=(0,a.useState)(!1),[J,X]=(0,a.useState)(!1),[Y,V]=(0,a.useState)(!1),[K,Q]=(0,a.useState)(!1),[Z,ee]=(0,a.useState)(!1),[he,fe]=(0,a.useState)(!1),[Ee,ve]=(0,a.useState)([]),[ge,ye]=(0,a.useState)(null),[be,Ce]=(0,a.useState)(null),[we,xe]=(0,a.useState)(null),[Se,ke]=(0,a.useState)(!1);async function Oe(e){n.site_r&&await fetch("/api/site/list/get/?uid="+e,{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>{e.ok&&e.json().then((e=>{const t=e.data;E(t);const n=t.map((e=>ue(e)));ze(n)}))}))}async function Ie(e){await fetch("/api/crop/list/get/?uid="+e,{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>{e.ok&&e.json().then((e=>{w(e.data)}))}))}async function qe(){await fetch("/api/site/type/",{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>{e.ok&&e.json().then((e=>{g(e.data)}))}))}async function _e(){await fetch("/api/unit/?usage=site",{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>{e.ok&&e.json().then((e=>{S(e.data)}))}))}async function je(){const e=de(P);console.log(e);const t={method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":(0,ne.U$)("csrftoken")},body:JSON.stringify(e)};await fetch("/api/site/create/",t).then((e=>{e.ok&&(Q(!0),X(!1),ke(~Se))}))}const ze=e=>{0===Object.keys(T).length?O(e):(e=>{let t=e;for(let e in T){const n=t.findIndex((t=>t.id===e));if(-1!==n){const e=t[n].children;t=[...t.slice(0,n+1),...e.map((e=>ue(e))),...t.slice(n+1)]}}O(t);const n=Object.keys(T).reduce(((e,n)=>{const a=t.find((e=>e.id===n));return a&&(e[n]=a.children.map((e=>e.sid))),e}),{});N(n)})(e)},Te=()=>{ve(Object.fromEntries(ie.map((e=>[e,!1]))))},Ne=()=>{Object.keys(A).forEach((e=>{""===A[e]?ve((t=>({...t,[e]:!0}))):ve((t=>({...t,[e]:!1})))}))},Pe=()=>{const e=G.map((e=>e.label));if([A[ie[0]],A[ie[1]]].every((e=>""!==e))){if(e.some((e=>oe.includes(e)))&&[A[ie[2]],A[ie[3]],A[ie[4]]].some((e=>""===e)))return void Ne();if("sid"in P){!async function(){const e=de(P);console.log(e);const t={method:"PUT",headers:{"Content-Type":"application/json","X-CSRFToken":(0,ne.U$)("csrftoken")},body:JSON.stringify(e)};await fetch("/api/site/update/",t).then((e=>{e.ok&&(Q(!0),ye(null),ke(~Se))}))}();const e=k.findIndex((e=>e.id===A.id));O([...k.slice(0,e),A,...k.slice(e+1)])}else je(),O((e=>e.filter((e=>e.id!==se))))}else Ne()};function Re(e){const t=k.findIndex((t=>t.id===e));if(t+1<k.length&&k[t+1].id===se)return!0;if(e in T)for(let t=0;t<T[e].length;t++)if(Re(T[e][t]))return!0;return!1}const Ae=e=>{Re(e.id)?ee(!0):(e=>{let t={...T},n=[...k];const a=e=>{t[e]&&(t[e].forEach((e=>{a(e),n=n.filter((t=>t.id!==e))})),delete t[e])};a(e),N(t),O(n)})(e.id)},Ue=e=>{k.find((e=>e.id===se))?ee(!0):async function(e){const n={user:t,sid:e};console.log(n);const a={method:"PUT",headers:{"Content-Type":"application/json","X-CSRFToken":(0,ne.U$)("csrftoken")},body:JSON.stringify(n)};await fetch("/api/site/delete/",a).then((e=>{e.ok&&(fe(!0),ke(~Se))}))}(e.id)},Me=e=>{D(v.filter((t=>t.level===e)).map((e=>({label:e.name,id:e.stid}))))},Ge=(e,t,n)=>{[ie[0],ie[2],ie[4]].includes(n)?(M({...A,[n]:t.label}),R({...P,[n]:t.id})):(M({...A,[n]:t}),R({...P,[n]:t}))},De=[{field:"operations",headerName:"Operations",sortable:!1,width:200,disableColumnMenu:!0,disableClickEventBubbling:!0,renderCell:e=>ge!==e.id?a.createElement(a.Fragment,null,a.createElement(l.c,{onClick:()=>(e=>{k.find((e=>e.id===se))?ee(!0):(R({sid:e.id}),M(Object.entries(e.row).reduce(((e,[t,n])=>(e[t]=null===n?"":n,e)),{})),ye(e.id),Me(v.find((t=>t.name===e.row.type)).level),Te())})(e),disabled:!n.site_u},a.createElement(c.c,null)),a.createElement(l.c,{onClick:t=>{Ce(t.currentTarget),xe(e.id)},disabled:!n.site_d},a.createElement(o.c,null)),!ce.includes(e.row.type)&&a.createElement(l.c,{onClick:()=>{(e=>{const{id:n,children:a}=e.row;let r=k.findIndex((e=>e.id===n)),l=[];if(k.find((e=>e.id===se)))return void ee(!0);const i=n in T?T:{...T,[n]:[...a.map((e=>e.sid))]};N(i),l=n in T?[...k]:[...k.slice(0,r+1),...a.map((e=>ue(e))),...k.slice(r+1)],r=l.findIndex((e=>e.id===n));const c=[...l.slice(0,r+1),{id:se,type:"",name:"",owner_name:"",crop:"",crop_year:"",size:"",size_unit:"",gps:"",gps_system:"",children:"",update_time:""},...l.slice(r+1)];O(c);const o=v.find((t=>t.name===e.row.type));Me(o.level+1),R({user_id:t,parent_id:n}),M(Object.fromEntries(ie.map((e=>[e,""])))),ye(se),Te()})(e)}},a.createElement(s.c,null)),e.row.children.length>0&&(e.id in T?a.createElement(l.c,{onClick:()=>Ae(e)},a.createElement(m.c,null)):a.createElement(l.c,{onClick:()=>(e=>{const{id:t,children:n}=e.row,a=k.findIndex((e=>e.id===t)),r={...T};r[t]=n.map((e=>e.sid)),N(r),O((e=>[...e.slice(0,a+1),...n.map((e=>ue(e))),...e.slice(a+1)]))})(e)},a.createElement(p.c,null))),we===e.id&&a.createElement(U.c,{anchorEl:be,setAnchorEl:Ce,onDeleteClicked:Ue,params:e,msg:"Delete this record?",type:"delete"})):a.createElement(a.Fragment,null,a.createElement(l.c,{onClick:()=>(e=>{e.id===se&&(e=>{const t=k.findIndex((t=>t.id===e));O([...k.slice(0,t),...k.slice(t+1)])})(e.id),ye(null),Te()})(e)},a.createElement(u.c,null)),a.createElement(l.c,{onClick:t=>{Ce(t.currentTarget),xe(e.id)}},a.createElement(d.c,null)),we===e.id&&a.createElement(U.c,{anchorEl:be,setAnchorEl:Ce,onSaveClicked:Pe,params:e,msg:"Update this record?",type:"update"}))},{field:"type",headerName:"Site Type",sortable:!1,width:re,renderCell:(e,t=e.id)=>a.createElement(y.c,{options:G||[],disableClearable:!0,readOnly:ge!==t,value:ge===t?A[ie[0]]:e.value,onChange:(e,t)=>{Ge(0,t,ie[0])},renderInput:e=>ge!==t?a.createElement(b.c,ae({},e,{variant:"standard",InputProps:{disableUnderline:!0},sx:{width:re}})):a.createElement(b.c,ae({},e,{variant:"standard",error:Ee[ie[0]],sx:{width:le}}))})},{field:"name",headerName:"Site Name",sortable:!1,width:re,renderCell:(e,t=e.id)=>ge!==t?a.createElement(b.c,{variant:"standard",value:e.value,InputProps:{disableUnderline:!0,readOnly:!0},sx:{width:re}}):a.createElement(b.c,{variant:"standard",value:A[ie[1]],error:Ee[ie[1]],sx:{width:le},onChange:e=>{Ge(0,e.target.value,ie[1])}})},{field:"crop",headerName:"Crop",sortable:!1,width:re,renderCell:(e,t=e.id)=>a.createElement(y.c,{options:L||[],disableClearable:!0,readOnly:ge!==t,disabled:ge===t&&!G.some((e=>oe.includes(e.label))),value:ge===t?A[ie[2]]:e.value,onChange:(e,t)=>{Ge(0,t,ie[2])},renderInput:e=>ge!==t?a.createElement(b.c,ae({},e,{variant:"standard",InputProps:{disableUnderline:!0},sx:{width:300}})):a.createElement(b.c,ae({},e,{variant:"standard",error:Ee[ie[2]],sx:{width:280}}))})},{field:"size",headerName:"Size",sortable:!1,width:re,renderCell:(e,t=e.id)=>ge!==t?a.createElement(b.c,{variant:"standard",value:e.value,InputProps:{disableUnderline:!0,readOnly:!0},sx:{width:re}}):a.createElement(b.c,{variant:"standard",type:"number",inputProps:{step:.01},value:A[ie[3]],error:Ee[ie[3]],sx:{width:le},onChange:e=>{Ge(0,e.target.value,ie[3])}})},{field:"size_unit",headerName:"Size Unit",sortable:!1,width:re,renderCell:(e,t=e.id)=>a.createElement(y.c,{options:F||[],disableClearable:!0,readOnly:ge!==t,value:ge===t?A[ie[4]]:e.value,onChange:(e,t)=>{Ge(0,t,ie[4])},renderInput:e=>ge!==t?a.createElement(b.c,ae({},e,{variant:"standard",InputProps:{disableUnderline:!0},sx:{width:re}})):a.createElement(b.c,ae({},e,{variant:"standard",error:Ee[ie[4]],sx:{width:le}}))})},{field:"gps",headerName:"GPS",sortable:!1,width:re,renderCell:(e,t=e.id)=>ge!==t?a.createElement(b.c,{variant:"standard",value:e.value,InputProps:{disableUnderline:!0,readOnly:!0},sx:{width:re}}):a.createElement(b.c,{variant:"standard",value:A[ie[5]],sx:{width:le},onChange:e=>{Ge(0,e.target.value,ie[5])}})},{field:"gps_system",headerName:"GPS System",sortable:!1,width:re,renderCell:(e,t=e.id)=>ge!==t?a.createElement(b.c,{variant:"standard",value:e.value,InputProps:{disableUnderline:!0,readOnly:!0},sx:{width:re}}):a.createElement(b.c,{variant:"standard",value:A[ie[6]],sx:{width:le},onChange:e=>{Ge(0,e.target.value,ie[6])}})},{field:"update_time",headerName:"Update Time",sortable:!1,width:re}],Le={fieldValues:A,formData:P,columns:De,siteTypeOptions:G,unitOptions:F,handleInputChange:Ge,showAddModal:J,setShowAddModal:X,setIsSave:Q,inputError:Ee,updateInputError:Ne,SiteRecordSave:je,refreshRecord:Se,setRefreshRecord:ke},$e={open:K,setOpen:Q,msg:"Site record is uploaded successfully!",tag:"success"},Fe={open:he,setOpen:fe,msg:"Site record has been deleted!",tag:"success"},He={open:Z,setOpen:ee,msg:"Please complete the sub-site adding!",tag:"warning"};return(0,a.useEffect)((()=>{(async()=>{await Promise.all([qe(),_e(),Ie(t)]),await Oe(t)})(),Te(),B(!0)}),[]),(0,a.useEffect)((()=>{$(C.map((e=>({label:e.crop+" ("+e.variety+")",id:e.cid})))),H(x.map((e=>({label:e.name,id:e.unitid}))))}),[v,C,x]),(0,a.useEffect)((()=>{W&&Oe(t)}),[Se]),a.createElement("div",null,a.createElement(I,{variant:"contained",startIcon:a.createElement(i.c,null),onClick:()=>(R({user_id:t}),M(Object.fromEntries(ie.map((e=>[e,""])))),ye(null),X(!0),Me(1),void Te()),disabled:!n.site_c},"Add Site"),a.createElement(q,{variant:"contained",startIcon:a.createElement(h.c,null),onClick:()=>{V((e=>!e))}},"Tree Structure"),a.createElement(_,null,Y&&a.createElement(te,{siteList:f}),a.createElement(r.c,{style:{height:900,margin:"0px 15px",width:"calc(100% - 30px)",overflow:"auto"}},a.createElement(j,{columns:De,rows:k,disableRowSelectionOnClick:!0,disableClickEdit:!0,rowSelection:!1,getRowClassName:e=>e.id!==se?`site-type-level--${v.find((t=>t.name===e.row.type)).level}`:null,slots:{toolbar:pe},localeText:{noRowsLabel:n.site_r?"No rows":"You don't have the privilege to access this data"}}))),a.createElement(me,Le),a.createElement(z.default,$e),a.createElement(z.default,Fe),a.createElement(z.default,He))}}}]);