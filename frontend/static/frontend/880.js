"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[880],{9518:(e,t,n)=>{n.d(t,{Z:()=>c});var a=n(7294),r=n(6914),l=n(2206),o=n(2658),i=n(4680);function c(e){return a.createElement(l.ZP,{open:Boolean(e.anchorEl),anchorEl:e.anchorEl,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},a.createElement(i.Z,{sx:{p:1,maxWidth:400}},a.createElement(o.Z,{variant:"body1"},e.msg),a.createElement(r.Z,{onClick:()=>{"delete"===e.type?(e.setAnchorEl(null),e.onDeleteClicked(e.params)):"update"===e.type&&(e.setAnchorEl(null),e.onSaveClicked())},color:"primary"},"Yes"),a.createElement(r.Z,{onClick:()=>e.setAnchorEl(null),color:"secondary"},"No")))}},4311:(e,t,n)=>{n.d(t,{Z:()=>s});var a=n(7294),r=n(6447),l=n(7608),o=n(2288);function i(){return i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},i.apply(this,arguments)}const c=a.forwardRef((function(e,t){return a.createElement(o.Z,i({elevation:6,ref:t,variant:"filled"},e))}));function s(e){const t=(t,n)=>{"clickaway"!==n&&e.setOpen(!1)};return a.createElement(r.Z,{spacing:2,sx:{width:"100%"}},a.createElement(l.Z,{open:e.open,autoHideDuration:6e3,onClose:t},(()=>{switch(e.tag){case"success":return a.createElement(c,{onClose:t,severity:"success",sx:{width:"100%"}},e.msg);case"error":return a.createElement(c,{onClose:t,severity:"error",sx:{width:"100%"}},e.msg);case"warning":return a.createElement(c,{onClose:t,severity:"warning",sx:{width:"100%"}},e.msg);default:return null}})()))}},1880:(e,t,n)=>{n.r(t),n.d(t,{default:()=>q});var a=n(7294),r=n(4680),l=n(6867),o=n(6540),i=n(7957),c=n(1733),s=n(6818),d=n(4510),u=n(7794),m=n(5295),h=n(2643),p=n(5725),E=n(5116),f=n(6914),g=n(3264),v=n(5137);const Z=(0,g.Z)(f.Z)((()=>({margin:"15px 15px",backgroundColor:v.Z[500],"&:hover":{backgroundColor:v.Z[700]}})));var C=n(4311),y=n(2176),w=n(6132),b=n(853),x=n(4482),k=n(7406),S=n(3306),O=n(9518);const j=200,P=180,A=["name","owner","code"];function N(){return a.createElement(y.D,null,a.createElement(w.S,null),a.createElement(b.M,null),a.createElement(x.L,null),a.createElement(k.Zh,null))}function I({fieldValues:e,formData:t,columns:n,handleInputChange:r,showAddModal:l,setShowAddModal:o,setIsSave:i,inputError:c,updateInputError:s,refreshRecord:d,setRefreshRecord:g}){return a.createElement(u.Z,{open:l,onClose:()=>o(!1),sx:{display:"flex",justifyContent:"center",alignItems:"center"}},a.createElement(m.Z,{sx:{width:400}},a.createElement(h.Z,null,a.createElement(p.ZP,{container:!0,justifyContent:"center",spacing:2},a.createElement(p.ZP,{item:!0,xs:12,sx:{textAlign:"center"}},a.createElement("h1",null,"Add Equipment Record")),a.createElement(p.ZP,{item:!0,xs:12},a.createElement(E.Z,{fullWidth:!0,error:c[A[0]],required:!0,variant:"outlined",label:n[1].headerName,onChange:e=>{r(e,e.target.value,A[0])}})),a.createElement(p.ZP,{item:!0,xs:12},a.createElement(E.Z,{fullWidth:!0,error:c[A[1]],required:!0,variant:"outlined",label:n[2].headerName,onChange:e=>{r(e,e.target.value,A[1])}})),a.createElement(p.ZP,{item:!0,xs:12},a.createElement(E.Z,{fullWidth:!0,variant:"outlined",label:n[3].headerName,onChange:e=>{r(e,e.target.value,A[2])}})),a.createElement(p.ZP,{item:!0,xs:6,sx:{justifyContent:"center",textAlign:"center"}},a.createElement(f.Z,{variant:"contained",color:"success",onClick:()=>{[e[A[0]],e[A[1]]].every((e=>""!==e))?async function(){const e=t;console.log(e);const n={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)};await fetch("/api/equipment/create/",n).then((e=>{e.ok&&(i(!0),o(!1),g(~d))}))}():s()}},"Save")),a.createElement(p.ZP,{item:!0,xs:6,sx:{justifyContent:"center",textAlign:"center"}},a.createElement(f.Z,{variant:"contained",color:"secondary",onClick:()=>o(!1)},"Cancel"))))))}function q(e){const t=e.uid,[n,u]=(0,a.useState)([]),[m,h]=(0,a.useState)({}),[p,f]=(0,a.useState)({}),[g,v]=(0,a.useState)(!1),[y,w]=(0,a.useState)(!1),[b,x]=(0,a.useState)(!1),[k,q]=(0,a.useState)([]),[T,R]=(0,a.useState)(null),[D,U]=(0,a.useState)(null),[M,_]=(0,a.useState)(null),[W,J]=(0,a.useState)(!1),z=()=>{q(Object.fromEntries(A.map((e=>[e,!1]))))},B=()=>{Object.keys(p).forEach((e=>{""===p[e]?q((t=>({...t,[e]:!0}))):q((t=>({...t,[e]:!1})))}))},F=()=>{if(Object.values(p).every((e=>""!==e))){!async function(){const e=m;console.log(e);const t={method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)};await fetch("/api/equipment/update/",t).then((e=>{e.ok&&(w(!0),R(null),J(~W))}))}();const e=n.findIndex((e=>e.id===p.id));u([...n.slice(0,e),p,...n.slice(e+1)])}else B()},V=e=>{!async function(e){const n={user:t,eid:e};console.log(n);const a={method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)};await fetch("/api/equipment/delete/",a).then((e=>{e.ok&&(x(!0),J(~W))}))}(e.id);const a=n.findIndex((t=>t.id===e.id));u([...n.slice(0,a),...n.slice(a+1)])},G=(e,t,n)=>{f({...p,[n]:t}),h({...m,[n]:t})},H=[{field:"operations",headerName:"Operations",sortable:!1,width:150,disableColumnMenu:!0,disableClickEventBubbling:!0,renderCell:e=>T!==e.id?a.createElement(a.Fragment,null,a.createElement(l.Z,{onClick:()=>(e=>{h({eid:e.id}),f(e.row),R(e.id),z()})(e)},a.createElement(i.Z,null)),a.createElement(l.Z,{onClick:t=>{U(t.currentTarget),_(e.id)}},a.createElement(c.Z,null)),M===e.id&&a.createElement(O.Z,{anchorEl:D,setAnchorEl:U,onDeleteClicked:V,params:e,msg:"Delete this record?",type:"delete"})):a.createElement(a.Fragment,null,a.createElement(l.Z,{onClick:t=>{U(t.currentTarget),_(e.id)}},a.createElement(s.Z,null)),a.createElement(l.Z,{onClick:()=>(R(null),void z())},a.createElement(d.Z,null)),M===e.id&&a.createElement(O.Z,{anchorEl:D,setAnchorEl:U,onSaveClicked:F,params:e,msg:"Update this record?",type:"update"}))},{field:"name",headerName:"Equipment Name",sortable:!1,width:j,renderCell:(e,t=e.id)=>T!==t?a.createElement(E.Z,{variant:"standard",value:e.value,InputProps:{disableUnderline:!0,readOnly:!0},sx:{width:j}}):a.createElement(E.Z,{variant:"standard",value:p[A[0]],error:k[A[0]],sx:{width:P},onChange:e=>{G(0,e.target.value,A[0])}})},{field:"owner",headerName:"Owner Name",sortable:!1,width:j,renderCell:(e,t=e.id)=>T!==t?a.createElement(E.Z,{variant:"standard",value:e.value,InputProps:{disableUnderline:!0,readOnly:!0},sx:{width:j}}):a.createElement(E.Z,{variant:"standard",value:p[A[1]],error:k[A[1]],sx:{width:P},onChange:e=>{G(0,e.target.value,A[1])}})},{field:"code",headerName:"Code",sortable:!1,width:j,renderCell:(e,t=e.id)=>T!==t?a.createElement(E.Z,{variant:"standard",value:e.value,InputProps:{disableUnderline:!0,readOnly:!0},sx:{width:j}}):a.createElement(E.Z,{variant:"standard",value:p[A[2]],error:k[A[2]],sx:{width:P},onChange:e=>{G(0,e.target.value,A[2])}})},{field:"update_time",headerName:"Update Time",sortable:!1,width:j}],L={fieldValues:p,formData:m,columns:H,handleInputChange:G,showAddModal:g,setShowAddModal:v,setIsSave:w,inputError:k,updateInputError:B,refreshRecord:W,setRefreshRecord:J},Y={open:y,setOpen:w,msg:"Equipment record is uploaded successfully!",tag:"success"},K={open:b,setOpen:x,msg:"Equipment record has been deleted!",tag:"success"};return(0,a.useEffect)((()=>{z()}),[]),(0,a.useEffect)((()=>{!async function(e){await fetch("/api/equipment/list/get/?uid="+e,{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>{e.ok&&e.json().then((e=>{const t=e.data.map((e=>function(e){return{id:e.eid,name:e.name,owner:e.owner,code:e.code,update_time:e.update_time}}(e)));u(t)}))}))}(t)}),[W]),a.createElement("div",null,a.createElement(Z,{variant:"contained",startIcon:a.createElement(o.Z,null),onClick:()=>(h({user_id:t}),f(Object.fromEntries(A.map((e=>[e,""])))),R(null),v(!0),void z())},"Add Equipment"),a.createElement(r.Z,{style:{height:900,margin:"0px 15px"}},a.createElement(S._,{columns:H,rows:n,disableRowSelectionOnClick:!0,disableClickEdit:!0,rowSelection:!1,slots:{toolbar:N}})),a.createElement(I,L),a.createElement(C.Z,Y),a.createElement(C.Z,K))}}}]);