"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[11],{9518:(e,t,a)=>{a.d(t,{Z:()=>c});var n=a(7294),r=a(6914),l=a(2206),i=a(2658),d=a(4680);function c(e){return n.createElement(l.ZP,{open:Boolean(e.anchorEl),anchorEl:e.anchorEl,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},n.createElement(d.Z,{sx:{p:1,maxWidth:400}},n.createElement(i.Z,{variant:"body1"},e.msg),n.createElement(r.Z,{onClick:()=>{"delete"===e.type?(e.setAnchorEl(null),e.onDeleteClicked(e.params)):"update"===e.type&&(e.setAnchorEl(null),e.onSaveClicked())},color:"primary"},"Yes"),n.createElement(r.Z,{onClick:()=>e.setAnchorEl(null),color:"secondary"},"No")))}},4311:(e,t,a)=>{a.d(t,{Z:()=>o});var n=a(7294),r=a(6447),l=a(7608),i=a(2288);function d(){return d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},d.apply(this,arguments)}const c=n.forwardRef((function(e,t){return n.createElement(i.Z,d({elevation:6,ref:t,variant:"filled"},e))}));function o(e){const t=(t,a)=>{"clickaway"!==a&&e.setOpen(!1)};return n.createElement(r.Z,{spacing:2,sx:{width:"100%"}},n.createElement(l.Z,{open:e.open,autoHideDuration:6e3,onClose:t},(()=>{switch(e.tag){case"success":return n.createElement(c,{onClose:t,severity:"success",sx:{width:"100%"}},e.msg);case"error":return n.createElement(c,{onClose:t,severity:"error",sx:{width:"100%"}},e.msg);case"warning":return n.createElement(c,{onClose:t,severity:"warning",sx:{width:"100%"}},e.msg);default:return null}})()))}},11:(e,t,a)=>{a.r(t),a.d(t,{default:()=>Y});var n=a(7294),r=a(4680),l=a(6867),i=a(6540),d=a(7957),c=a(1733),o=a(6818),s=a(4510),u=a(7794),m=a(5295),h=a(2643),p=a(5725),v=a(6694),E=a(5116),b=a(6914),g=a(3264),f=a(5137);const y=(0,g.Z)(b.Z)((()=>({margin:"15px 15px",backgroundColor:f.Z[500],"&:hover":{backgroundColor:f.Z[700]}})));var Z=a(4311),_=a(2176),C=a(6132),w=a(853),x=a(4482),P=a(7406),O=a(3306),N=a(720),k=a(6189),I=a(9518),S=a(9925),j=a(7484),A=a.n(j);function T(){return T=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},T.apply(this,arguments)}const U=200,R=180,G=["epa_reg_no","trade_name","restricted_use","company","active_ingredient","percent_ai","type","unit","rei","phi","labeled_crops","label_image","imported_from","validated_by","entered_year"];function L(e){const{unit:t,...a}=e;return{unit_id:t,...a}}function M(){return n.createElement(_.D,null,n.createElement(C.S,null),n.createElement(w.M,null),n.createElement(x.L,null),n.createElement(P.Zh,null))}function D({fieldValues:e,formData:t,columns:a,unitOptions:r,chemicalProductBaseOptions:l,handleInputChange:i,handleEPANOChange:d,showAddModal:c,setShowAddModal:o,setIsSave:s,inputError:g,updateInputError:f,refreshRecord:y,setRefreshRecord:Z}){return n.createElement(u.Z,{open:c,onClose:()=>o(!1),sx:{display:"flex",justifyContent:"center",alignItems:"center"}},n.createElement(m.Z,{sx:{width:800}},n.createElement(h.Z,null,n.createElement(p.ZP,{container:!0,justifyContent:"center",spacing:2},n.createElement(p.ZP,{item:!0,xs:12,sx:{textAlign:"center"}},n.createElement("h1",null,"Add Chemical Record")),n.createElement(p.ZP,{item:!0,xs:3},n.createElement(v.Z,{value:e[G[0]],options:l,onChange:(e,t)=>{i(e,t,G[0])},renderInput:e=>n.createElement(E.Z,T({},e,{required:!0,variant:"outlined",label:a[1].headerName,error:g[G[0]],onChange:e=>{d(e)}}))})),n.createElement(p.ZP,{item:!0,xs:3},n.createElement(E.Z,{value:e[G[1]],InputLabelProps:{shrink:!0,readOnly:!0},variant:"outlined",label:a[2].headerName})),n.createElement(p.ZP,{item:!0,xs:3},n.createElement(E.Z,{value:e[G[2]],InputLabelProps:{shrink:!0,readOnly:!0},variant:"outlined",label:a[3].headerName})),n.createElement(p.ZP,{item:!0,xs:3},n.createElement(E.Z,{value:e[G[3]],InputLabelProps:{shrink:!0,readOnly:!0},variant:"outlined",label:a[4].headerName})),n.createElement(p.ZP,{item:!0,xs:3},n.createElement(E.Z,{value:e[G[4]],InputLabelProps:{shrink:!0,readOnly:!0},variant:"outlined",label:a[5].headerName})),n.createElement(p.ZP,{item:!0,xs:3},n.createElement(E.Z,{value:e[G[5]],InputLabelProps:{shrink:!0,readOnly:!0},variant:"outlined",label:a[6].headerName})),n.createElement(p.ZP,{item:!0,xs:3},n.createElement(E.Z,{value:e[G[6]],InputLabelProps:{shrink:!0,readOnly:!0},variant:"outlined",label:a[7].headerName})),n.createElement(p.ZP,{item:!0,xs:3},n.createElement(v.Z,{value:e[G[7]],options:r,onChange:(e,t)=>{i(e,t,G[7])},renderInput:e=>n.createElement(E.Z,T({},e,{required:!0,variant:"outlined",label:a[8].headerName,error:g[G[7]]}))})),n.createElement(p.ZP,{item:!0,xs:3},n.createElement(E.Z,{error:g[G[8]],required:!0,variant:"outlined",label:a[9].headerName,onChange:e=>{i(e,e.target.value,G[8])}})),n.createElement(p.ZP,{item:!0,xs:3},n.createElement(E.Z,{error:g[G[9]],required:!0,variant:"outlined",label:a[10].headerName,onChange:e=>{i(e,e.target.value,G[9])}})),n.createElement(p.ZP,{item:!0,xs:3},n.createElement(E.Z,{variant:"outlined",label:a[11].headerName,onChange:e=>{i(e,e.target.value,G[10])}})),n.createElement(p.ZP,{item:!0,xs:3},n.createElement(E.Z,{variant:"outlined",label:a[12].headerName,onChange:e=>{i(e,e.target.value,G[11])}})),n.createElement(p.ZP,{item:!0,xs:3},n.createElement(E.Z,{variant:"outlined",label:a[13].headerName,onChange:e=>{i(e,e.target.value,G[12])}})),n.createElement(p.ZP,{item:!0,xs:3},n.createElement(E.Z,{variant:"outlined",label:a[14].headerName,onChange:e=>{i(e,e.target.value,G[13])}})),n.createElement(p.ZP,{item:!0,xs:3},n.createElement(N._,{dateAdapter:S.y},n.createElement(k.M,{variant:"outlined",label:a[15].headerName,views:["year"],openTo:"year",onChange:e=>{i(e,e.$y,G[14])}}))),n.createElement(p.ZP,{item:!0,xs:3}),n.createElement(p.ZP,{item:!0,xs:6,sx:{justifyContent:"center",textAlign:"center"}},n.createElement(b.Z,{variant:"contained",color:"success",onClick:()=>{0===Object.keys(e).filter((e=>G.slice(0,10).includes(e))).filter((t=>""===e[t])).length?async function(){const e=L(t);console.log(e);const a={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)};await fetch("/api/chemical/create/",a).then((e=>{e.ok&&(s(!0),o(!1),Z(~y))}))}():f()}},"Save")),n.createElement(p.ZP,{item:!0,xs:6,sx:{justifyContent:"center",textAlign:"center"}},n.createElement(b.Z,{variant:"contained",color:"secondary",onClick:()=>o(!1)},"Cancel"))))))}function Y(e){const t=e.uid,[a,u]=(0,n.useState)([]),[m,h]=(0,n.useState)([]),[p,b]=(0,n.useState)([]),[g,f]=(0,n.useState)({}),[_,C]=(0,n.useState)({}),[w,x]=(0,n.useState)([]),[P,j]=(0,n.useState)([]),[Y,B]=(0,n.useState)(!1),[q,F]=(0,n.useState)(!1),[J,V]=(0,n.useState)(!1),[z,H]=(0,n.useState)([]),[W,$]=(0,n.useState)(null),[K,Q]=(0,n.useState)(null),[X,ee]=(0,n.useState)(null),[te,ae]=(0,n.useState)(!1),ne=()=>{H(Object.fromEntries(G.map((e=>[e,!1]))))},re=()=>{Object.keys(_).forEach((e=>{""===_[e]?H((t=>({...t,[e]:!0}))):H((t=>({...t,[e]:!1})))}))},le=()=>{if(Object.values(_).slice(0,10).every((e=>""!==e))){!async function(){const e=L(g);console.log(e);const t={method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)};await fetch("/api/chemical/update/",t).then((e=>{e.ok&&(F(!0),$(null),ae(~te))}))}();const e=p.findIndex((e=>e.id===_.id));b([...p.slice(0,e),_,...p.slice(e+1)])}else re()},ie=e=>{!async function(e){const a={user:t,chemid:e};console.log(a);const n={method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)};await fetch("/api/chemical/delete/",n).then((e=>{e.ok&&(V(!0),ae(~te))}))}(e.id);const a=p.findIndex((t=>t.id===e.id));b([...p.slice(0,a),...p.slice(a+1)])},de=(e,t,a)=>{a===G[0]?(console.log(t),C({..._,[a]:t.label,[G[1]]:t.product_name_dec,[G[2]]:t.restricted_use_dec,[G[3]]:t.company_name_dec,[G[4]]:t.pc_name_dec,[G[5]]:t.pc_pt_dec,[G[6]]:t.product_type_dec}),f({...g,[a]:t.label,[G[1]]:t.product_name_dec,[G[2]]:t.restricted_use_dec,[G[3]]:t.company_name_dec,[G[4]]:t.pc_name_dec,[G[5]]:t.pc_pt_dec,[G[6]]:t.product_type_dec})):a===G[7]?(C({..._,[a]:t.label}),f({...g,[a]:t.id})):(C({..._,[a]:t}),f({...g,[a]:t}))},ce=e=>{e.target.value.length>=4&&async function(e){await fetch("/api/chemical/productbase/?reg_no="+e,{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>{e.ok&&e.json().then((e=>{h(e.data)}))}))}(e.target.value)},oe=[{field:"operations",headerName:"Operations",sortable:!1,width:150,disableColumnMenu:!0,disableClickEventBubbling:!0,renderCell:e=>W!==e.id?n.createElement(n.Fragment,null,n.createElement(l.Z,{onClick:()=>(e=>{const t=w.find((t=>t.label===e.row.unit));f({chemid:e.id,unit:t.id}),C(e.row),$(e.id),ne()})(e)},n.createElement(d.Z,null)),n.createElement(l.Z,{onClick:t=>{Q(t.currentTarget),ee(e.id)}},n.createElement(c.Z,null)),X===e.id&&n.createElement(I.Z,{anchorEl:K,setAnchorEl:Q,onDeleteClicked:ie,params:e,msg:"Delete this record?",type:"delete"})):n.createElement(n.Fragment,null,n.createElement(l.Z,{onClick:t=>{Q(t.currentTarget),ee(e.id)}},n.createElement(o.Z,null)),n.createElement(l.Z,{onClick:()=>($(null),void ne())},n.createElement(s.Z,null)),X===e.id&&n.createElement(I.Z,{anchorEl:K,setAnchorEl:Q,onSaveClicked:le,params:e,msg:"Update this record?",type:"update"}))},{field:"epa_reg_no",headerName:"EAP REG NO.",sortable:!1,width:U,renderCell:(e,t=e.id)=>n.createElement(v.Z,{options:P,disableClearable:!0,readOnly:W!==t,value:W===t?_[G[0]]:e.value,onChange:(e,t)=>{de(0,t,G[0])},renderInput:e=>W!==t?n.createElement(E.Z,T({},e,{variant:"standard",InputProps:{disableUnderline:!0},sx:{width:U}})):n.createElement(E.Z,T({},e,{variant:"standard",error:z[G[0]],sx:{width:R},onChange:e=>{ce(e)}}))})},{field:"trade_name",headerName:"Trade Name",sortable:!1,width:U,valueGetter:e=>W===e.id?_[G[1]]:e.value},{field:"restricted_use",headerName:"Restricted Use",sortable:!1,width:U,valueGetter:e=>W===e.id?_[G[2]]:e.value},{field:"company",headerName:"Company",sortable:!1,width:U,valueGetter:e=>W===e.id?_[G[3]]:e.value},{field:"active_ingredient",headerName:"Active Ingredient",sortable:!1,width:U,valueGetter:e=>W===e.id?_[G[4]]:e.value},{field:"percent_ai",headerName:"Active Ingredient Percent",sortable:!1,width:U,valueGetter:e=>W===e.id?_[G[5]]:e.value},{field:"type",headerName:"Product Type",sortable:!1,width:U,valueGetter:e=>W===e.id?_[G[6]]:e.value},{field:"unit",headerName:"Application Unit",sortable:!1,width:U,renderCell:(e,t=e.id)=>n.createElement(v.Z,{options:w,disableClearable:!0,readOnly:W!==t,value:W===t?_[G[7]]:e.value,onChange:(e,t)=>{de(0,t,G[7])},renderInput:e=>W!==t?n.createElement(E.Z,T({},e,{variant:"standard",InputProps:{disableUnderline:!0},sx:{width:U}})):n.createElement(E.Z,T({},e,{variant:"standard",error:z[G[7]],sx:{width:R}}))})},{field:"rei",headerName:"REI",sortable:!1,width:U,renderCell:(e,t=e.id)=>W!==t?n.createElement(E.Z,{variant:"standard",value:e.value,InputProps:{disableUnderline:!0,readOnly:!0},sx:{width:U}}):n.createElement(E.Z,{variant:"standard",value:_[G[8]],error:z[G[8]],sx:{width:R},onChange:e=>{de(0,e.target.value,G[8])}})},{field:"phi",headerName:"PHI",sortable:!1,width:U,renderCell:(e,t=e.id)=>W!==t?n.createElement(E.Z,{variant:"standard",value:e.value,InputProps:{disableUnderline:!0,readOnly:!0},sx:{width:U}}):n.createElement(E.Z,{variant:"standard",value:_[G[9]],error:z[G[9]],sx:{width:R},onChange:e=>{de(0,e.target.value,G[9])}})},{field:"labeled_crops",headerName:"Labeled Crops",sortable:!1,width:U,renderCell:(e,t=e.id)=>W!==t?n.createElement(E.Z,{variant:"standard",value:e.value,InputProps:{disableUnderline:!0,readOnly:!0},sx:{width:U}}):n.createElement(E.Z,{variant:"standard",value:_[G[10]],sx:{width:R},onChange:e=>{de(0,e.target.value,G[10])}})},{field:"label_image",headerName:"Labeled Image",sortable:!1,width:U,renderCell:(e,t=e.id)=>W!==t?n.createElement(E.Z,{variant:"standard",value:e.value,InputProps:{disableUnderline:!0,readOnly:!0},sx:{width:U}}):n.createElement(E.Z,{variant:"standard",value:_[G[11]],sx:{width:R},onChange:e=>{de(0,e.target.value,G[11])}})},{field:"imported_from",headerName:"Imported From",sortable:!1,width:U,renderCell:(e,t=e.id)=>W!==t?n.createElement(E.Z,{variant:"standard",value:e.value,InputProps:{disableUnderline:!0,readOnly:!0},sx:{width:U}}):n.createElement(E.Z,{variant:"standard",value:_[G[12]],sx:{width:R},onChange:e=>{de(0,e.target.value,G[12])}})},{field:"validated_by",headerName:"Validated By",sortable:!1,width:U,renderCell:(e,t=e.id)=>W!==t?n.createElement(E.Z,{variant:"standard",value:e.value,InputProps:{disableUnderline:!0,readOnly:!0},sx:{width:U}}):n.createElement(E.Z,{variant:"standard",value:_[G[13]],sx:{width:R},onChange:e=>{de(0,e.target.value,G[13])}})},{field:"entered_year",headerName:"Entered Year",sortable:!1,width:U,renderCell:(e,t=e.id)=>W!==t?n.createElement(E.Z,{variant:"standard",value:e.value,InputProps:{disableUnderline:!0,readOnly:!0},sx:{width:U}}):n.createElement(N._,{dateAdapter:S.y},n.createElement(k.M,{variant:"standard",sx:{width:R},views:["year"],value:A()(_[G[14]]),slotProps:{textField:{variant:"standard"}},onChange:e=>{de(0,A()(e).format("YYYY"),G[14])}}))},{field:"update_time",headerName:"Update Time",sortable:!1,width:U}],se={fieldValues:_,formData:g,columns:oe,unitOptions:w,chemicalProductBaseOptions:P,handleInputChange:de,handleEPANOChange:ce,showAddModal:Y,setShowAddModal:B,setIsSave:F,inputError:z,updateInputError:re,refreshRecord:te,setRefreshRecord:ae},ue={open:q,setOpen:F,msg:"Chemical record is uploaded successfully!",tag:"success"},me={open:J,setOpen:V,msg:"Chemical record has been deleted!",tag:"success"};return(0,n.useEffect)((()=>{!async function(){await fetch("/api/unit/?usage=chemical",{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>{e.ok&&e.json().then((e=>{u(e.data)}))}))}(),ne()}),[]),(0,n.useEffect)((()=>{x(a.map((e=>({label:e.name,id:e.unitid}))))}),[a]),(0,n.useEffect)((()=>{j(m.map((e=>({label:e.epa_reg_no_dec,id:e.chempbid,...e}))))}),[m]),(0,n.useEffect)((()=>{!async function(e){await fetch("/api/chemical/list/get/?uid="+e,{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>{e.ok&&e.json().then((e=>{const t=e.data.map((e=>function(e){return{id:e.chemid,epa_reg_no:e.epa_reg_no,trade_name:e.trade_name,restricted_use:e.restricted_use,company:e.company,active_ingredient:e.active_ingredient,percent_ai:e.percent_ai,type:e.type,unit:e.unit,rei:e.rei,phi:e.phi,labeled_crops:e.labeled_crops,label_image:e.label_image,imported_from:e.imported_from,validated_by:e.validated_by,entered_year:e.entered_year,update_time:e.update_time}}(e)));b(t)}))}))}(t)}),[te]),n.createElement("div",null,n.createElement(y,{variant:"contained",startIcon:n.createElement(i.Z,null),onClick:()=>(f({user_id:t}),C(Object.fromEntries(G.map((e=>[e,""])))),$(null),B(!0),void ne())},"Add Chemical"),n.createElement(r.Z,{style:{height:900,margin:"0px 15px"}},n.createElement(O._,{columns:oe,rows:p,disableRowSelectionOnClick:!0,disableClickEdit:!0,rowSelection:!1,slots:{toolbar:M}})),n.createElement(D,se),n.createElement(Z.Z,ue),n.createElement(Z.Z,me))}}}]);