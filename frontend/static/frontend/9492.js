"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[9492],{9700:(e,t,n)=>{var a=n(7649);t.c=void 0;var r=a(n(3540)),c=n(7624),o=(0,r.default)((0,c.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"}),"Delete");t.c=o},7516:(e,t,n)=>{n.d(t,{c:()=>w});var a=n(5072),r=n(5656),c=n(1504),o=n(3268),l=n.n(o),s=n(4971),i=n(4048),d=n(5664),u=n(6940),m=n(440),p=n(6968),h=n(7100),f=n(1272);function E(e){return(0,f.c)("MuiCard",e)}(0,h.c)("MuiCard",["root"]);var v=n(7624);const C=["className","raised"],g=(0,u.cp)(p.c,{name:"MuiCard",slot:"Root",overridesResolver:(e,t)=>t.root})((()=>({overflow:"hidden"}))),y=c.forwardRef((function(e,t){const n=(0,m.c)({props:e,name:"MuiCard"}),{className:c,raised:o=!1}=n,l=(0,r.c)(n,C),i=(0,a.c)({},n,{raised:o}),u=(e=>{const{classes:t}=e;return(0,d.c)({root:["root"]},E,t)})(i);return(0,v.jsx)(g,(0,a.c)({className:(0,s.c)(u.root,c),elevation:o?8:void 0,ref:t,ownerState:i},l))}));y.propTypes={children:l().node,classes:l().object,className:l().string,raised:(0,i.c)(l().bool,(e=>e.raised&&"outlined"===e.variant?new Error('MUI: Combining `raised={true}` with `variant="outlined"` has no effect.'):null)),sx:l().oneOfType([l().arrayOf(l().oneOfType([l().func,l().object,l().bool])),l().func,l().object])};const w=y},4477:(e,t,n)=>{n.d(t,{c:()=>g});var a=n(5072),r=n(5656),c=n(1504),o=n(3268),l=n.n(o),s=n(4971),i=n(5664),d=n(6940),u=n(440),m=n(7100),p=n(1272);function h(e){return(0,p.c)("MuiCardContent",e)}(0,m.c)("MuiCardContent",["root"]);var f=n(7624);const E=["className","component"],v=(0,d.cp)("div",{name:"MuiCardContent",slot:"Root",overridesResolver:(e,t)=>t.root})((()=>({padding:16,"&:last-child":{paddingBottom:24}}))),C=c.forwardRef((function(e,t){const n=(0,u.c)({props:e,name:"MuiCardContent"}),{className:c,component:o="div"}=n,l=(0,r.c)(n,E),d=(0,a.c)({},n,{component:o}),m=(e=>{const{classes:t}=e;return(0,i.c)({root:["root"]},h,t)})(d);return(0,f.jsx)(v,(0,a.c)({as:o,className:(0,s.c)(m.root,c),ownerState:d,ref:t},l))}));C.propTypes={children:l().node,classes:l().object,className:l().string,component:l().elementType,sx:l().oneOfType([l().arrayOf(l().oneOfType([l().func,l().object,l().bool])),l().func,l().object])};const g=C},2060:(e,t,n)=>{n.d(t,{c:()=>s});var a=n(1504),r=n(1940),c=n(6864),o=n(8857),l=n(6968);function s(e){return a.createElement(c.cp,{open:Boolean(e.anchorEl),anchorEl:e.anchorEl,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},a.createElement(l.c,{sx:{p:1,maxWidth:400}},a.createElement(o.c,{variant:"body1"},e.msg),a.createElement(r.c,{onClick:()=>{"delete"===e.type?(e.setAnchorEl(null),e.onDeleteClicked(e.params)):"update"===e.type&&(e.setAnchorEl(null),e.onSaveClicked())},color:"primary"},"Yes"),a.createElement(r.c,{onClick:()=>e.setAnchorEl(null),color:"secondary"},"No")))}},7600:(e,t,n)=>{n.r(t),n.d(t,{default:()=>i});var a=n(1504),r=n(6988),c=n(6350),o=n(4408);function l(){return l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},l.apply(this,arguments)}const s=a.forwardRef((function(e,t){return a.createElement(o.c,l({elevation:6,ref:t,variant:"filled"},e))}));function i(e){const t=(t,n)=>{"clickaway"!==n&&e.setOpen(!1)};return a.createElement(r.c,{spacing:2,sx:{width:"100%"}},a.createElement(c.c,{open:e.open,autoHideDuration:6e3,onClose:t},(()=>{switch(e.tag){case"success":return a.createElement(s,{onClose:t,severity:"success",sx:{width:"100%"}},e.msg);case"error":return a.createElement(s,{onClose:t,severity:"error",sx:{width:"100%"}},e.msg);case"warning":return a.createElement(s,{onClose:t,severity:"warning",sx:{width:"100%"}},e.msg);default:return null}})()))}},9492:(e,t,n)=>{n.r(t),n.d(t,{default:()=>U});var a=n(1504),r=n(6968),c=n(3562),o=n(3704),l=n(3683),s=n(9700),i=n(108),d=n(8880),u=n(5984),m=n(7516),p=n(4477),h=n(3964),f=n(3604),E=n(1940),v=n(6060),C=n(3628);const g=(0,v.c)(E.c)((()=>({margin:"15px 15px",backgroundColor:C.c[500],"&:hover":{backgroundColor:C.c[700]}})));var y=n(7600),w=n(3083),b=n(8604),x=n(8388),k=n(4024),S=n(5466),O=n(9440),j=n(2060),N=n(2528);const T=200,R=300,M=180,q=["name","code","note"];function I(){return a.createElement(w.q,null,a.createElement(b.S,null),a.createElement(x.e,null),a.createElement(k.a,null),a.createElement(S.Wc,null))}function A({fieldValues:e,formData:t,columns:n,handleInputChange:r,showAddModal:c,setShowAddModal:o,setIsSave:l,inputError:s,updateInputError:i,refreshRecord:d,setRefreshRecord:v}){return a.createElement(u.c,{open:c,sx:{display:"flex",justifyContent:"center",alignItems:"center"}},a.createElement(m.c,{sx:{width:400}},a.createElement(p.c,null,a.createElement(h.cp,{container:!0,justifyContent:"center",spacing:2},a.createElement(h.cp,{item:!0,xs:12,sx:{textAlign:"center"}},a.createElement("h1",null,"Add Equipment Record")),a.createElement(h.cp,{item:!0,xs:12},a.createElement(f.c,{fullWidth:!0,error:s[q[0]],required:!0,variant:"outlined",label:n[1].headerName,onChange:e=>{r(e,e.target.value,q[0])}})),a.createElement(h.cp,{item:!0,xs:12},a.createElement(f.c,{fullWidth:!0,variant:"outlined",label:n[2].headerName,onChange:e=>{r(e,e.target.value,q[1])}})),a.createElement(h.cp,{item:!0,xs:12},a.createElement(f.c,{fullWidth:!0,variant:"outlined",multiline:!0,rows:3,label:n[3].headerName,onChange:e=>{r(e,e.target.value,q[2])}})),a.createElement(h.cp,{item:!0,xs:6,sx:{justifyContent:"center",textAlign:"center"}},a.createElement(E.c,{variant:"contained",color:"secondary",onClick:()=>o(!1)},"Cancel")),a.createElement(h.cp,{item:!0,xs:6,sx:{justifyContent:"center",textAlign:"center"}},a.createElement(E.c,{variant:"contained",color:"success",onClick:()=>{[e[q[0]]].every((e=>""!==e))?async function(){const e=t;console.log(e);const n={method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":(0,N.U$)("csrftoken")},body:JSON.stringify(e)};await fetch("/api/equipment/create/",n).then((e=>{e.ok&&(l(!0),o(!1),v(~d))}))}():i()}},"Save"))))))}function U(e){e.uid;const t=e.employerID,n=e.privilege,[u,m]=(0,a.useState)([]),[p,h]=(0,a.useState)({}),[E,v]=(0,a.useState)({}),[C,w]=(0,a.useState)(!1),[b,x]=(0,a.useState)(!1),[k,S]=(0,a.useState)(!1),[U,_]=(0,a.useState)(!1),[D,P]=(0,a.useState)([]),[F,W]=(0,a.useState)(null),[z,V]=(0,a.useState)(null),[B,H]=(0,a.useState)(null),[J,X]=(0,a.useState)(!1);async function $(e){n.equip_r&&await fetch("/api/equipment/list/get/?uid="+e,{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>{e.ok&&e.json().then((e=>{const t=e.data.map((e=>function(e){for(let t in e)null===e[t]&&(e[t]="");return{id:e.eid,name:e.name,code:e.code,note:e.note,update_time:e.update_time}}(e)));m(t)}))}))}const Y=()=>{P(Object.fromEntries(q.map((e=>[e,!1]))))},G=()=>{Object.keys(E).forEach((e=>{""===E[e]?P((t=>({...t,[e]:!0}))):P((t=>({...t,[e]:!1})))}))},L=()=>{if(""!==E[q[0]]){!async function(){const e=p;console.log(e);const t={method:"PUT",headers:{"Content-Type":"application/json","X-CSRFToken":(0,N.U$)("csrftoken")},body:JSON.stringify(e)};await fetch("/api/equipment/update/",t).then((e=>{e.ok&&(S(!0),W(null),X(~J))}))}();const e=u.findIndex((e=>e.id===E.id));m([...u.slice(0,e),E,...u.slice(e+1)])}else G()},K=e=>{!async function(e){const n={user:t,eid:e};console.log(n);const a={method:"PUT",headers:{"Content-Type":"application/json","X-CSRFToken":(0,N.U$)("csrftoken")},body:JSON.stringify(n)};await fetch("/api/equipment/delete/",a).then((e=>{e.ok&&(_(!0),X(~J))}))}(e.id);const n=u.findIndex((t=>t.id===e.id));m([...u.slice(0,n),...u.slice(n+1)])},Q=(e,t,n)=>{v({...E,[n]:t}),h({...p,[n]:t})},Z=[{field:"operations",headerName:"Operations",sortable:!1,width:150,disableColumnMenu:!0,disableClickEventBubbling:!0,renderCell:e=>F!==e.id?a.createElement(a.Fragment,null,a.createElement(c.c,{onClick:()=>(e=>{h({eid:e.id}),v(e.row),W(e.id),Y()})(e),disabled:!n.equip_u},a.createElement(l.c,null)),a.createElement(c.c,{onClick:t=>{V(t.currentTarget),H(e.id)},disabled:!n.equip_d},a.createElement(s.c,null)),B===e.id&&a.createElement(j.c,{anchorEl:z,setAnchorEl:V,onDeleteClicked:K,params:e,msg:"Delete this record?",type:"delete"})):a.createElement(a.Fragment,null,a.createElement(c.c,{onClick:()=>(W(null),void Y())},a.createElement(d.c,null)),a.createElement(c.c,{onClick:t=>{V(t.currentTarget),H(e.id)}},a.createElement(i.c,null)),B===e.id&&a.createElement(j.c,{anchorEl:z,setAnchorEl:V,onSaveClicked:L,params:e,msg:"Update this record?",type:"update"}))},{field:"name",headerName:"Sprayers/Spreaders",width:T,renderCell:(e,t=e.id)=>F!==t?a.createElement(f.c,{variant:"standard",value:e.value,InputProps:{disableUnderline:!0,readOnly:!0},sx:{width:T}}):a.createElement(f.c,{variant:"standard",value:E[q[0]],error:D[q[0]],sx:{width:M},onChange:e=>{Q(0,e.target.value,q[0])}})},{field:"code",headerName:"Code",width:T,renderCell:(e,t=e.id)=>F!==t?a.createElement(f.c,{variant:"standard",value:e.value,InputProps:{disableUnderline:!0,readOnly:!0},sx:{width:T}}):a.createElement(f.c,{variant:"standard",value:E[q[1]],sx:{width:M},onChange:e=>{Q(0,e.target.value,q[1])}})},{field:"note",headerName:"Note",width:R,renderCell:(e,t=e.id)=>F!==t?a.createElement(f.c,{variant:"standard",value:e.value,InputProps:{disableUnderline:!0,readOnly:!0},sx:{width:R}}):a.createElement(f.c,{variant:"standard",value:E[q[2]],sx:{width:M},onChange:e=>{Q(0,e.target.value,q[2])}})},{field:"update_time",headerName:"Update Time",sortable:!1,width:T}],ee={fieldValues:E,formData:p,columns:Z,handleInputChange:Q,showAddModal:b,setShowAddModal:x,setIsSave:S,inputError:D,updateInputError:G,refreshRecord:J,setRefreshRecord:X},te={open:k,setOpen:S,msg:"Equipment record is uploaded successfully!",tag:"success"},ne={open:U,setOpen:_,msg:"Equipment record has been deleted!",tag:"success"};return(0,a.useEffect)((()=>{(async()=>{await Promise.all([$(t)])})(),Y(),w(!0)}),[]),(0,a.useEffect)((()=>{C&&$(t)}),[J]),a.createElement("div",null,a.createElement(g,{variant:"contained",startIcon:a.createElement(o.c,null),onClick:()=>(h({user_id:t}),v(Object.fromEntries(q.map((e=>[e,""])))),W(null),x(!0),void Y()),disabled:!n.equip_c},"Add Equipment"),a.createElement(r.c,{style:{height:900,margin:"0px 15px",width:"calc(100% - 30px)",overflow:"auto"}},a.createElement(O.o,{columns:Z,rows:u,disableRowSelectionOnClick:!0,disableClickEdit:!0,rowSelection:!1,slots:{toolbar:I},localeText:{noRowsLabel:n.equip_r?"No rows":"You don't have the privilege to access this data"}})),a.createElement(A,ee),a.createElement(y.default,te),a.createElement(y.default,ne))}}}]);