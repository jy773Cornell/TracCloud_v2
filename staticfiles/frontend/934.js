"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[934],{9518:(e,t,n)=>{n.d(t,{Z:()=>s});var a=n(7294),r=n(6914),l=n(2206),i=n(2658),o=n(4680);function s(e){return a.createElement(l.ZP,{open:Boolean(e.anchorEl),anchorEl:e.anchorEl,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},a.createElement(o.Z,{sx:{p:1,maxWidth:400}},a.createElement(i.Z,{variant:"body1"},e.msg),a.createElement(r.Z,{onClick:()=>{"delete"===e.type?(e.setAnchorEl(null),e.onDeleteClicked(e.params)):"update"===e.type&&(e.setAnchorEl(null),e.onSaveClicked())},color:"primary"},"Yes"),a.createElement(r.Z,{onClick:()=>e.setAnchorEl(null),color:"secondary"},"No")))}},4311:(e,t,n)=>{n.d(t,{Z:()=>d});var a=n(7294),r=n(6447),l=n(7608),i=n(2288);function o(){return o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},o.apply(this,arguments)}const s=a.forwardRef((function(e,t){return a.createElement(i.Z,o({elevation:6,ref:t,variant:"filled"},e))}));function d(e){const t=(t,n)=>{"clickaway"!==n&&e.setOpen(!1)};return a.createElement(r.Z,{spacing:2,sx:{width:"100%"}},a.createElement(l.Z,{open:e.open,autoHideDuration:6e3,onClose:t},(()=>{switch(e.tag){case"success":return a.createElement(s,{onClose:t,severity:"success",sx:{width:"100%"}},e.msg);case"error":return a.createElement(s,{onClose:t,severity:"error",sx:{width:"100%"}},e.msg);case"warning":return a.createElement(s,{onClose:t,severity:"warning",sx:{width:"100%"}},e.msg);default:return null}})()))}},8934:(e,t,n)=>{n.r(t),n.d(t,{default:()=>pe});var a=n(7294),r=n(4680),l=n(6867),i=n(6540),o=n(7957),s=n(1733),d=n(3205),c=n(6818),u=n(4510),m=n(5185),p=n(181),h=n(5013),v=n(7794),E=n(5295),f=n(2643),g=n(5725),Z=n(6694),y=n(5116),C=n(6914),b=n(3264),w=n(5137),x=n(3486),S=n(7036),k=n(3306);const O=(0,b.Z)(C.Z)((()=>({margin:"15px",backgroundColor:w.Z[500],"&:hover":{backgroundColor:w.Z[700]}}))),_=(0,b.Z)(C.Z)((()=>({margin:"15px 0px",backgroundColor:x.Z[500],"&:hover":{backgroundColor:x.Z[700]}}))),q=(0,b.Z)("div")({display:"flex",flexDirection:"row",flexGrow:1}),I=(0,b.Z)(k._)((()=>({"& .site-type-level--1":{backgroundColor:S.Z[300],"&:hover":{backgroundColor:S.Z[400]}},"& .site-type-level--2":{backgroundColor:S.Z[200],"&:hover":{backgroundColor:S.Z[200]}},"& .site-type-level--3":{backgroundColor:S.Z[100],"&:hover":{backgroundColor:S.Z[100]}},"& .site-type-level--4":{backgroundColor:S.Z[50],"&:hover":{backgroundColor:S.Z[50]}}})));var P=n(4311),j=n(2176),z=n(6132),N=n(853),T=n(4482),A=n(7406),M=n(9518),R=n(9757),U=n(8377),G=n(8144),D=n(2981),L=n(5697),$=n.n(L),H=n(948),B=n(1796),F=n(7313),J=n(4020),W=n(3502);function Y(){return Y=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Y.apply(this,arguments)}function V(e){const t=(0,G.q_)({from:{opacity:0,transform:"translate3d(20px,0,0)"},to:{opacity:e.in?1:0,transform:`translate3d(${e.in?0:20}px,0,0)`}});return a.createElement(G.q.div,{style:t},a.createElement(D.Z,e))}V.propTypes={in:$().bool};const K=(0,H.ZP)((e=>a.createElement(F.Z,Y({},e,{TransitionComponent:V}))))((({theme:e})=>({[`& .${J.Z.iconContainer}`]:{"& .close":{opacity:.3}},[`& .${J.Z.group}`]:{marginLeft:15,paddingLeft:18,borderLeft:`1px dashed ${(0,B.Fq)(e.palette.text.primary,.4)}`}})));function Q(e){return a.createElement(W.Z,Y({fontSize:"inherit",style:{width:14,height:14}},e),a.createElement("path",{d:"M22.047 22.074v0 0-20.147 0h-20.12v0 20.147 0h20.12zM22.047 24h-20.12q-.803 0-1.365-.562t-.562-1.365v-20.147q0-.776.562-1.351t1.365-.575h20.147q.776 0 1.351.575t.575 1.351v20.147q0 .803-.575 1.365t-1.378.562v0zM17.873 11.023h-11.826q-.375 0-.669.281t-.294.682v0q0 .401.294 .682t.669.281h11.826q.375 0 .669-.281t.294-.682v0q0-.401-.294-.682t-.669-.281z"}))}function X(e){return a.createElement(W.Z,Y({fontSize:"inherit",style:{width:14,height:14}},e),a.createElement("path",{d:"M22.047 22.074v0 0-20.147 0h-20.12v0 20.147 0h20.12zM22.047 24h-20.12q-.803 0-1.365-.562t-.562-1.365v-20.147q0-.776.562-1.351t1.365-.575h20.147q.776 0 1.351.575t.575 1.351v20.147q0 .803-.575 1.365t-1.378.562v0zM17.873 12.977h-4.923v4.896q0 .401-.281.682t-.682.281v0q-.375 0-.669-.281t-.294-.682v-4.896h-4.923q-.401 0-.682-.294t-.281-.669v0q0-.401.281-.682t.682-.281h4.923v-4.896q0-.401.294-.682t.669-.281v0q.401 0 .682.281t.281.682v4.896h4.923q.401 0 .682.281t.281.682v0q0 .375-.281.669t-.682.294z"}))}function ee(e){return a.createElement(W.Z,Y({className:"close",fontSize:"inherit",style:{width:14,height:14}},e),a.createElement("path",{d:"M17.485 17.512q-.281.281-.682.281t-.696-.268l-4.12-4.147-4.12 4.147q-.294.268-.696.268t-.682-.281-.281-.682.294-.669l4.12-4.147-4.12-4.147q-.294-.268-.294-.669t.281-.682.682-.281.696 .268l4.12 4.147 4.12-4.147q.294-.268.696-.268t.682.281 .281.669-.294.682l-4.12 4.147 4.12 4.147q.294.268 .294.669t-.281.682zM22.047 22.074v0 0-20.147 0h-20.12v0 20.147 0h20.12zM22.047 24h-20.12q-.803 0-1.365-.562t-.562-1.365v-20.147q0-.776.562-1.351t1.365-.575h20.147q.776 0 1.351.575t.575 1.351v20.147q0 .803-.575 1.365t-1.378.562v0z"}))}function te(e){const[t,n]=a.useState([]),l=e=>e.reduce(((e,t)=>(t.children&&t.children.length>0&&(e.push(t.sid),e.push(...l(t.children))),e)),[]),i=e=>a.createElement(K,{key:e.sid,nodeId:e.sid.toString(),label:e.type+" - "+e.name},Array.isArray(e.children)?e.children.map((e=>i(e))):null);return a.createElement(r.Z,{sx:{height:"100%",width:250,marginLeft:"15px"}},a.createElement(U.Z,{sx:{maxHeight:400,flexGrow:1,width:250,overflowY:"auto"}},a.createElement(U.Z,{sx:{mb:1,margin:"0px"}},a.createElement(C.Z,{onClick:()=>{n((t=>0===t.length?l(e.siteList):[]))}},0===t.length?"Expand all":"Collapse all")),a.createElement(R.Z,{"aria-label":"customized",defaultExpanded:[],defaultCollapseIcon:a.createElement(Q,null),defaultExpandIcon:a.createElement(X,null),defaultEndIcon:a.createElement(ee,null),expanded:t,onNodeToggle:(e,t)=>{n(t)},sx:{flexGrow:1,width:250}},e.siteList.map((e=>i(e))))))}function ne(){return ne=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},ne.apply(this,arguments)}const ae=200,re=180,le=["type","name","owner_name","crop","crop_year","size","size_unit","gps","gps_system"],ie=["Row","Hole Code#","Section",""],oe=["Row","Hole Code#","Section","Block"],se="create_add_row_data";function de(e){const{type:t,crop:n,size_unit:a,...r}=e;return{type_id:t,crop_id:n,size_unit_id:a,...r}}function ce(e){return{id:e.sid,type:e.type,name:e.name,owner_name:e.owner_name,crop:e.crop?e.crop.crop+" ("+e.crop.variety+", "+e.crop.growth_stage+")":"",crop_year:e.crop_year,size:e.size,size_unit:e.size_unit,gps:e.gps,gps_system:e.gps_system,children:e.children,update_time:e.update_time}}function ue(){return a.createElement(j.D,null,a.createElement(z.S,null),a.createElement(N.M,null),a.createElement(T.L,null),a.createElement(A.Zh,null))}function me({fieldValues:e,formData:t,columns:n,siteTypeOptions:r,unitOptions:l,handleInputChange:i,showAddModal:o,setShowAddModal:s,setIsSave:d,inputError:c,updateInputError:u,SiteRecordSave:m,refreshRecord:p,setRefreshRecord:h}){return a.createElement(v.Z,{open:o,onClose:()=>s(!1),sx:{display:"flex",justifyContent:"center",alignItems:"center"}},a.createElement(E.Z,{sx:{width:400}},a.createElement(f.Z,null,a.createElement(g.ZP,{container:!0,justifyContent:"center",spacing:2},a.createElement(g.ZP,{item:!0,xs:12,sx:{textAlign:"center"}},a.createElement("h1",null,"Add Site Record")),a.createElement(g.ZP,{item:!0,xs:12},a.createElement(Z.Z,{value:e[le[0]],options:r,onChange:(e,t)=>{i(e,t,le[0])},renderInput:e=>a.createElement(y.Z,ne({},e,{required:!0,variant:"outlined",label:n[1].headerName,error:c[le[0]]}))})),a.createElement(g.ZP,{item:!0,xs:12},a.createElement(y.Z,{error:c[le[1]],required:!0,fullWidth:!0,variant:"outlined",label:n[2].headerName,onChange:e=>{i(e,e.target.value,le[1])}})),a.createElement(g.ZP,{item:!0,xs:12},a.createElement(y.Z,{fullWidth:!0,variant:"outlined",label:n[3].headerName,onChange:e=>{i(e,e.target.value,le[2])}})),a.createElement(g.ZP,{item:!0,xs:6},a.createElement(y.Z,{variant:"outlined",label:n[6].headerName,onChange:e=>{i(e,e.target.value,le[5])}})),a.createElement(g.ZP,{item:!0,xs:6},a.createElement(Z.Z,{value:e[le[6]],options:l,onChange:(e,t)=>{i(e,t,le[6])},renderInput:e=>a.createElement(y.Z,ne({},e,{variant:"outlined",label:n[7].headerName}))})),a.createElement(g.ZP,{item:!0,xs:6},a.createElement(y.Z,{variant:"outlined",label:n[8].headerName,onChange:e=>{i(e,e.target.value,le[7])}})),a.createElement(g.ZP,{item:!0,xs:6},a.createElement(y.Z,{variant:"outlined",label:n[9].headerName,onChange:e=>{i(e,e.target.value,le[8])}})),a.createElement(g.ZP,{item:!0,xs:6,sx:{justifyContent:"center",textAlign:"center"}},a.createElement(C.Z,{variant:"contained",color:"success",onClick:()=>{[e[le[0]],e[le[1]]].every((e=>""!==e))?m():u()}},"Save")),a.createElement(g.ZP,{item:!0,xs:6,sx:{justifyContent:"center",textAlign:"center"}},a.createElement(C.Z,{variant:"contained",color:"secondary",onClick:()=>s(!1)},"Cancel"))))))}function pe(e){const t=e.uid,[n,v]=(0,a.useState)([]),[E,f]=(0,a.useState)([]),[g,C]=(0,a.useState)([]),[b,w]=(0,a.useState)([]),[x,S]=(0,a.useState)([]),[k,j]=(0,a.useState)({}),[z,N]=(0,a.useState)({}),[T,A]=(0,a.useState)({}),[R,U]=(0,a.useState)([]),[G,D]=(0,a.useState)([]),[L,$]=(0,a.useState)([]),[H,B]=(0,a.useState)(!1),[F,J]=(0,a.useState)(!1),[W,Y]=(0,a.useState)(!1),[V,K]=(0,a.useState)(!1),[Q,X]=(0,a.useState)(!1),[ee,pe]=(0,a.useState)([]),[he,ve]=(0,a.useState)(null),[Ee,fe]=(0,a.useState)(null),[ge,Ze]=(0,a.useState)(null),[ye,Ce]=(0,a.useState)(!1);async function be(){const e=de(z);console.log(e);const t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)};await fetch("/api/site/create/",t).then((e=>{e.ok&&(Y(!0),B(!1),Ce(~ye))}))}const we=()=>{pe(Object.fromEntries(le.map((e=>[e,!1]))))},xe=()=>{Object.keys(T).forEach((e=>{""===T[e]?pe((t=>({...t,[e]:!0}))):pe((t=>({...t,[e]:!1})))}))},Se=()=>{if([T[le[0]],T[le[1]]].every((e=>""!==e)))if("sid"in z){!async function(){const e=de(z);console.log(e);const t={method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)};await fetch("/api/site/update/",t).then((e=>{e.ok&&(Y(!0),ve(null),Ce(~ye))}))}();const e=x.findIndex((e=>e.id===T.id));S([...x.slice(0,e),T,...x.slice(e+1)])}else be(),S((e=>e.filter((e=>e.id!==se))));else xe()};function ke(e){const t=x.findIndex((t=>t.id===e));if(t+1<x.length&&x[t+1].id===se)return!0;if(e in k)for(let t=0;t<k[e].length;t++)if(ke(k[e][t]))return!0;return!1}const Oe=e=>{ke(e.id)?K(!0):(e=>{let t={...k},n=[...x];const a=e=>{t[e]&&(t[e].forEach((e=>{a(e),n=n.filter((t=>t.id!==e))})),delete t[e])};a(e),j(t),S(n)})(e.id)},_e=e=>{x.find((e=>e.id===se))?K(!0):async function(e){const n={user:t,sid:e};console.log(n);const a={method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)};await fetch("/api/site/delete/",a).then((e=>{e.ok&&(X(!0),Ce(~ye))}))}(e.id)},qe=e=>{U(E.filter((t=>t.level===e)).map((e=>({label:e.name,id:e.stid}))))},Ie=(e,t,n)=>{[le[0],le[3],le[6]].includes(n)?(A({...T,[n]:t.label}),N({...z,[n]:t.id})):(A({...T,[n]:t}),N({...z,[n]:t}))},Pe=[{field:"operations",headerName:"Operations",sortable:!1,width:200,disableColumnMenu:!0,disableClickEventBubbling:!0,renderCell:e=>he!==e.id?a.createElement(a.Fragment,null,a.createElement(l.Z,{onClick:()=>(e=>{x.find((e=>e.id===se))?K(!0):(N({sid:e.id}),A(e.row),ve(e.id),qe(E.find((t=>t.name===e.row.type)).level),we())})(e)},a.createElement(o.Z,null)),a.createElement(l.Z,{onClick:t=>{fe(t.currentTarget),Ze(e.id)}},a.createElement(s.Z,null)),!ie.includes(e.row.type)&&a.createElement(l.Z,{onClick:()=>{(e=>{const{id:n,children:a}=e.row;let r=x.findIndex((e=>e.id===n)),l=[];if(x.find((e=>e.id===se)))return void K(!0);const i=n in k?k:{...k,[n]:[...a.map((e=>e.sid))]};j(i),l=n in k?[...x]:[...x.slice(0,r+1),...a.map((e=>ce(e))),...x.slice(r+1)],r=l.findIndex((e=>e.id===n));const o=[...l.slice(0,r+1),{id:se,type:"",name:"",owner_name:"",crop:"",crop_year:"",size:"",size_unit:"",gps:"",gps_system:"",children:"",update_time:""},...l.slice(r+1)];S(o);const s=E.find((t=>t.name===e.row.type));qe(s.level+1),N({user_id:t,parent_id:n}),A(Object.fromEntries(le.map((e=>[e,""])))),ve(se),we()})(e)}},a.createElement(d.Z,null)),e.row.children.length>0&&(e.id in k?a.createElement(l.Z,{onClick:()=>Oe(e)},a.createElement(p.Z,null)):a.createElement(l.Z,{onClick:()=>(e=>{const{id:t,children:n}=e.row,a=x.findIndex((e=>e.id===t)),r={...k};r[t]=n.map((e=>e.sid)),j(r),S((e=>[...e.slice(0,a+1),...n.map((e=>ce(e))),...e.slice(a+1)]))})(e)},a.createElement(m.Z,null))),ge===e.id&&a.createElement(M.Z,{anchorEl:Ee,setAnchorEl:fe,onDeleteClicked:_e,params:e,msg:"Delete this record?",type:"delete"})):a.createElement(a.Fragment,null,a.createElement(l.Z,{onClick:t=>{fe(t.currentTarget),Ze(e.id)}},a.createElement(c.Z,null)),a.createElement(l.Z,{onClick:()=>(e=>{e.id===se&&(e=>{const t=x.findIndex((t=>t.id===e));S([...x.slice(0,t),...x.slice(t+1)])})(e.id),ve(null),we()})(e)},a.createElement(u.Z,null)),ge===e.id&&a.createElement(M.Z,{anchorEl:Ee,setAnchorEl:fe,onSaveClicked:Se,params:e,msg:"Update this record?",type:"update"}))},{field:"type",headerName:"Site Type",sortable:!1,width:ae,renderCell:(e,t=e.id)=>a.createElement(Z.Z,{options:R,disableClearable:!0,readOnly:he!==t,value:he===t?T[le[0]]:e.value,onChange:(e,t)=>{Ie(0,t,le[0])},renderInput:e=>he!==t?a.createElement(y.Z,ne({},e,{variant:"standard",InputProps:{disableUnderline:!0},sx:{width:ae}})):a.createElement(y.Z,ne({},e,{variant:"standard",error:ee[le[0]],sx:{width:re}}))})},{field:"name",headerName:"Site Name",sortable:!1,width:ae,renderCell:(e,t=e.id)=>he!==t?a.createElement(y.Z,{variant:"standard",value:e.value,InputProps:{disableUnderline:!0,readOnly:!0},sx:{width:ae}}):a.createElement(y.Z,{variant:"standard",value:T[le[1]],error:ee[le[1]],sx:{width:re},onChange:e=>{Ie(0,e.target.value,le[1])}})},{field:"owner_name",headerName:"Owner Name",sortable:!1,width:ae,renderCell:(e,t=e.id)=>he!==t?a.createElement(y.Z,{variant:"standard",value:e.value,InputProps:{disableUnderline:!0,readOnly:!0},sx:{width:ae}}):a.createElement(y.Z,{variant:"standard",value:T[le[2]],sx:{width:re},onChange:e=>{Ie(0,e.target.value,le[2])}})},{field:"crop",headerName:"Crop",sortable:!1,width:300,renderCell:(e,t=e.id)=>a.createElement(Z.Z,{options:G,disableClearable:!0,readOnly:he!==t,disabled:he===t&&!R.some((e=>oe.includes(e.label))),value:he===t?T[le[3]]:e.value,onChange:(e,t)=>{Ie(0,t,le[3])},renderInput:e=>he!==t?a.createElement(y.Z,ne({},e,{variant:"standard",InputProps:{disableUnderline:!0},sx:{width:300}})):a.createElement(y.Z,ne({},e,{variant:"standard",sx:{width:280}}))})},{field:"crop_year",headerName:"Crop Year",sortable:!1,width:ae,renderCell:(e,t=e.id)=>he!==t?a.createElement(y.Z,{variant:"standard",value:e.value,InputProps:{disableUnderline:!0,readOnly:!0},sx:{width:ae}}):a.createElement(y.Z,{variant:"standard",disabled:he===t&&!R.some((e=>oe.includes(e.label))),value:T[le[4]],sx:{width:re},onChange:e=>{Ie(0,e.target.value,le[4])}})},{field:"size",headerName:"Size",sortable:!1,width:ae,renderCell:(e,t=e.id)=>he!==t?a.createElement(y.Z,{variant:"standard",value:e.value,InputProps:{disableUnderline:!0,readOnly:!0},sx:{width:ae}}):a.createElement(y.Z,{variant:"standard",value:T[le[5]],sx:{width:re},onChange:e=>{Ie(0,e.target.value,le[5])}})},{field:"size_unit",headerName:"Size Unit",sortable:!1,width:ae,renderCell:(e,t=e.id)=>a.createElement(Z.Z,{options:L,disableClearable:!0,readOnly:he!==t,value:he===t?T[le[6]]:e.value,onChange:(e,t)=>{Ie(0,t,le[6])},renderInput:e=>he!==t?a.createElement(y.Z,ne({},e,{variant:"standard",InputProps:{disableUnderline:!0},sx:{width:ae}})):a.createElement(y.Z,ne({},e,{variant:"standard",sx:{width:re}}))})},{field:"gps",headerName:"GPS",sortable:!1,width:ae,renderCell:(e,t=e.id)=>he!==t?a.createElement(y.Z,{variant:"standard",value:e.value,InputProps:{disableUnderline:!0,readOnly:!0},sx:{width:ae}}):a.createElement(y.Z,{variant:"standard",value:T[le[7]],sx:{width:re},onChange:e=>{Ie(0,e.target.value,le[7])}})},{field:"gps_system",headerName:"GPS System",sortable:!1,width:ae,renderCell:(e,t=e.id)=>he!==t?a.createElement(y.Z,{variant:"standard",value:e.value,InputProps:{disableUnderline:!0,readOnly:!0},sx:{width:ae}}):a.createElement(y.Z,{variant:"standard",value:T[le[8]],sx:{width:re},onChange:e=>{Ie(0,e.target.value,le[8])}})},{field:"update_time",headerName:"Update Time",sortable:!1,width:ae}],je={fieldValues:T,formData:z,columns:Pe,siteTypeOptions:R,unitOptions:L,handleInputChange:Ie,showAddModal:H,setShowAddModal:B,setIsSave:Y,inputError:ee,updateInputError:xe,SiteRecordSave:be,refreshRecord:ye,setRefreshRecord:Ce},ze={open:W,setOpen:Y,msg:"Site record is uploaded successfully!",tag:"success"},Ne={open:Q,setOpen:X,msg:"Site record has been deleted!",tag:"success"},Te={open:V,setOpen:K,msg:"Please complete the sub-site adding!",tag:"warning"};return(0,a.useEffect)((()=>{!async function(){await fetch("/api/site/type/",{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>{e.ok&&e.json().then((e=>{f(e.data)}))}))}(),async function(){await fetch("/api/unit/?usage=site",{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>{e.ok&&e.json().then((e=>{w(e.data)}))}))}(),async function(e){await fetch("/api/crop/list/get/?uid="+e,{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>{e.ok&&e.json().then((e=>{C(e.data)}))}))}(t),we()}),[]),(0,a.useEffect)((()=>{D(g.map((e=>({label:e.crop+" ("+e.variety+", "+e.growth_stage+")",id:e.cid})))),$(b.map((e=>({label:e.name,id:e.unitid}))))}),[E,g,b]),(0,a.useEffect)((()=>{!async function(e){await fetch("/api/site/list/get/?uid="+e,{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>{e.ok&&e.json().then((e=>{const t=e.data;v(t);(e=>{0===Object.keys(k).length?S(e):(e=>{let t=e;for(let e in k){const n=t.findIndex((t=>t.id===e));if(-1!==n){const e=t[n].children;t=[...t.slice(0,n+1),...e.map((e=>ce(e))),...t.slice(n+1)]}}S(t);const n=Object.keys(k).reduce(((e,n)=>{const a=t.find((e=>e.id===n));return a&&(e[n]=a.children.map((e=>e.sid))),e}),{});j(n)})(e)})(t.map((e=>ce(e))))}))}))}(t)}),[ye]),a.createElement("div",null,a.createElement(O,{variant:"contained",startIcon:a.createElement(i.Z,null),onClick:()=>(N({user_id:t}),A(Object.fromEntries(le.map((e=>[e,""])))),ve(null),B(!0),qe(1),void we())},"Add Site"),a.createElement(_,{variant:"contained",startIcon:a.createElement(h.Z,null),onClick:()=>{J((e=>!e))}},"Tree Structure"),a.createElement(q,null,F&&a.createElement(te,{siteList:n}),a.createElement(r.Z,{style:{height:900,margin:"0px 15px"}},a.createElement(I,{columns:Pe,rows:x,disableRowSelectionOnClick:!0,disableClickEdit:!0,rowSelection:!1,getRowClassName:e=>e.id!==se?`site-type-level--${E.find((t=>t.name===e.row.type)).level}`:null,slots:{toolbar:ue}}))),a.createElement(me,je),a.createElement(P.Z,ze),a.createElement(P.Z,Ne),a.createElement(P.Z,Te))}}}]);