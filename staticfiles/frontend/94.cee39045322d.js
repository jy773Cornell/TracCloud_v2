"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[94],{9518:(e,t,a)=>{a.d(t,{Z:()=>o});var n=a(7294),r=a(6914),i=a(2206),l=a(2658),d=a(4680);function o(e){return n.createElement(i.ZP,{open:Boolean(e.anchorEl),anchorEl:e.anchorEl,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},n.createElement(d.Z,{sx:{p:1,maxWidth:400}},n.createElement(l.Z,{variant:"body1"},e.msg),n.createElement(r.Z,{onClick:()=>{"delete"===e.type?(e.setAnchorEl(null),e.onDeleteClicked(e.params)):"update"===e.type&&(e.setAnchorEl(null),e.onSaveClicked())},color:"primary"},"Yes"),n.createElement(r.Z,{onClick:()=>e.setAnchorEl(null),color:"secondary"},"No")))}},4311:(e,t,a)=>{a.d(t,{Z:()=>s});var n=a(7294),r=a(6447),i=a(7608),l=a(2288);function d(){return d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},d.apply(this,arguments)}const o=n.forwardRef((function(e,t){return n.createElement(l.Z,d({elevation:6,ref:t,variant:"filled"},e))}));function s(e){const t=(t,a)=>{"clickaway"!==a&&e.setOpen(!1)};return n.createElement(r.Z,{spacing:2,sx:{width:"100%"}},n.createElement(i.Z,{open:e.open,autoHideDuration:6e3,onClose:t},(()=>{switch(e.tag){case"success":return n.createElement(o,{onClose:t,severity:"success",sx:{width:"100%"}},e.msg);case"error":return n.createElement(o,{onClose:t,severity:"error",sx:{width:"100%"}},e.msg);case"warning":return n.createElement(o,{onClose:t,severity:"warning",sx:{width:"100%"}},e.msg);default:return null}})()))}},4094:(e,t,a)=>{a.r(t),a.d(t,{default:()=>B});var n=a(7294),r=a(7484),i=a.n(r),l=a(4680),d=a(6867),o=a(6540),s=a(7957),c=a(1733),u=a(6818),p=a(4510),m=a(4320),h=a(7171),E=a(7794),v=a(5295),_=a(2643),f=a(5725),b=a(6694),g=a(5116),w=a(4212),Z=a(270),C=a(6914),y=a(3264),x=a(5137);const P=(0,y.Z)(C.Z)((()=>({margin:"15px 15px",backgroundColor:x.Z[500],"&:hover":{backgroundColor:x.Z[700]}})));var O=a(4311),S=a(2176),N=a(6132),I=a(853),$=a(4482),A=a(7406),k=a(3306),j=a(9518),T=a(720),U=a(9925),H=a(5611),q=a(6189);function D(){return D=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},D.apply(this,arguments)}const G=200,Y=250,M=350,R=["crop","site","applied_area","area_unit","app_date","start_time","finish_time","operator","target","decision_support","chemical_purchase","equipment","water_use","water_unit","application_rate","rate_unit","total_amount","amount_unit","total_cost","customer","wind_speed","wind_direction","average_temp"],W=["Row","Hole Code#","Section","Block"],F=[{label:"North",id:0},{label:"Northeast",id:1},{label:"East",id:2},{label:"Southeast",id:3},{label:"South",id:4},{label:"Southwest",id:5},{label:"West",id:6},{label:"Northwest",id:7}];function L(){return n.createElement(S.D,null,n.createElement(N.S,null),n.createElement(I.M,null),n.createElement($.L,null),n.createElement(A.Zh,null))}function z({cropOptions:e,siteOptions:t,siteUnitOptions:a,applicationTargetOptions:r,decisionSupportOptions:l,addChemicalOptions:d,equipmentOptions:o,chemicalUnitOptions:s,windDirectionOptions:c,fieldValues:u,formData:p,columns:y,handleAddInputChange:x,showAddModal:P,setShowAddModal:O,setIsSave:S,inputError:N,updateInputError:I,refreshRecord:$,setRefreshRecord:A}){const k=n.createElement(m.Z,{fontSize:"small"}),j=n.createElement(h.Z,{fontSize:"small"});return n.createElement(E.Z,{open:P,onClose:()=>O(!1),sx:{display:"flex",justifyContent:"center",alignItems:"center"}},n.createElement(v.Z,{sx:{width:1e3}},n.createElement(_.Z,null,n.createElement(f.ZP,{container:!0,justifyContent:"center",spacing:2},n.createElement(f.ZP,{item:!0,xs:12,sx:{textAlign:"center"}},n.createElement("h1",null,"Add Spray Record")),n.createElement(f.ZP,{item:!0,xs:6},n.createElement(b.Z,{value:u[R[0]],options:e,onChange:(e,t)=>{x(e,t,R[0])},renderInput:e=>n.createElement(g.Z,D({},e,{required:!0,variant:"outlined",placeholder:"Crop (Variety, Growth Stage)",label:y[1].headerName,error:N[R[0]]}))})),n.createElement(f.ZP,{item:!0,xs:6},n.createElement(b.Z,{multiple:!0,value:u[R[1]],getOptionLabel:e=>e.label,options:t,disableCloseOnSelect:!0,onChange:(e,t)=>{x(e,t,R[1])},renderOption:(e,t,{selected:a})=>n.createElement("li",e,n.createElement(w.Z,{icon:k,checkedIcon:j,style:{marginRight:8},checked:a}),t.label),renderInput:e=>n.createElement(g.Z,D({},e,{required:!0,variant:"outlined",label:y[2].headerName,error:N[R[1]]}))})),n.createElement(f.ZP,{item:!0,xs:2.4},n.createElement(g.Z,{variant:"outlined",fullWidth:!0,required:!0,type:"number",inputProps:{step:.01},label:y[3].headerName,error:N[R[2]],onChange:e=>{x(e,e.target.value,R[2])}})),n.createElement(f.ZP,{item:!0,xs:2.4},n.createElement(b.Z,{value:u[R[3]],options:a,onChange:(e,t)=>{x(e,t,R[3])},renderInput:e=>n.createElement(g.Z,D({},e,{required:!0,variant:"outlined",label:"Area Unit",error:N[R[3]]}))})),n.createElement(f.ZP,{item:!0,xs:2.4},n.createElement(T._,{dateAdapter:U.y},n.createElement(q.M,{variant:"outlined",label:y[4].headerName,value:i()(u[R[4]]),onChange:e=>{x(e,i()(e).format("YYYY-MM-DD"),R[4])},sx:{width:"100%"}}))),n.createElement(f.ZP,{item:!0,xs:2.4},n.createElement(T._,{dateAdapter:U.y},n.createElement(H.j,{variant:"outlined",label:y[5].headerName,value:i()(`1970-01-01T${i()(u[R[5]],"h:mm A").format("HH:mm")}`),onChange:e=>{x(e,i()(e).format("HH:mm A"),R[5])},sx:{width:"100%"}}))),n.createElement(f.ZP,{item:!0,xs:2.4},n.createElement(T._,{dateAdapter:U.y},n.createElement(H.j,{variant:"outlined",label:y[6].headerName,value:i()(`1970-01-01T${i()(u[R[6]],"h:mm A").format("HH:mm")}`),onChange:e=>{x(e,i()(e).format("HH:mm A"),R[6])},sx:{width:"100%"}}))),n.createElement(f.ZP,{item:!0,xs:3},n.createElement(g.Z,{variant:"outlined",fullWidth:!0,required:!0,label:y[7].headerName,error:N[R[7]],onChange:e=>{x(e,e.target.value,R[7])}})),n.createElement(f.ZP,{item:!0,xs:4.5},n.createElement(b.Z,{value:u[R[8]],options:r,onChange:(e,t)=>{x(e,t,R[8])},renderInput:e=>n.createElement(g.Z,D({},e,{required:!0,variant:"outlined",label:y[8].headerName,error:N[R[8]]}))})),n.createElement(f.ZP,{item:!0,xs:4.5},n.createElement(b.Z,{value:u[R[9]],options:l,onChange:(e,t)=>{x(e,t,R[9])},renderInput:e=>n.createElement(g.Z,D({},e,{required:!0,variant:"outlined",label:y[9].headerName,error:N[R[9]]}))})),n.createElement(f.ZP,{item:!0,xs:12},n.createElement(b.Z,{value:u[R[10]],options:d,onChange:(e,t)=>{x(e,t,R[10])},renderInput:e=>n.createElement(g.Z,D({},e,{required:!0,variant:"outlined",placeholder:"EPA NO.  |  Trade Name  |  Active Ingredient  |  REI  |  PHI  |  Cost per Unit  |  Purchase Date",label:"Chemical",error:N[R[10]]}))})),n.createElement(f.ZP,{item:!0,xs:3},n.createElement(b.Z,{value:u[R[11]],options:o,onChange:(e,t)=>{x(e,t,R[11])},renderInput:e=>n.createElement(g.Z,D({},e,{required:!0,variant:"outlined",placeholder:"Equipment (Owner, Code)",label:y[17].headerName,error:N[R[11]]}))})),n.createElement(f.ZP,{item:!0,xs:3.5},n.createElement(g.Z,{variant:"outlined",fullWidth:!0,required:!0,type:"number",inputProps:{step:.01},InputProps:{endAdornment:n.createElement(Z.Z,{position:"end"},`per ${u[R[15]]}`)},label:y[18].headerName,error:N[R[12]],onChange:e=>{x(e,e.target.value,R[12])}})),n.createElement(f.ZP,{item:!0,xs:2},n.createElement(b.Z,{value:u[R[13]],options:s,onChange:(e,t)=>{x(e,t,R[13])},renderInput:e=>n.createElement(g.Z,D({},e,{required:!0,variant:"outlined",label:"Water Unit",error:N[R[13]]}))})),n.createElement(f.ZP,{item:!0,xs:3.5},n.createElement(g.Z,{variant:"outlined",fullWidth:!0,required:!0,type:"number",inputProps:{step:.01},InputProps:{endAdornment:n.createElement(Z.Z,{position:"end"},`${u[R[17]]} per ${u[R[15]]}`)},label:y[19].headerName,error:N[R[14]],onChange:e=>{x(e,e.target.value,R[14])}})),n.createElement(f.ZP,{item:!0,xs:4},n.createElement(g.Z,{variant:"outlined",fullWidth:!0,value:u[R[16]],label:y[20].headerName,InputLabelProps:{shrink:!0,readOnly:!0},InputProps:{endAdornment:n.createElement(Z.Z,{position:"end"},`${u[R[17]]}`)}})),n.createElement(f.ZP,{item:!0,xs:4},n.createElement(g.Z,{variant:"outlined",fullWidth:!0,value:u[R[18]],label:y[21].headerName,InputLabelProps:{shrink:!0,readOnly:!0},InputProps:{startAdornment:n.createElement(Z.Z,{position:"start"},"$")}})),n.createElement(f.ZP,{item:!0,xs:4},n.createElement(g.Z,{variant:"outlined",fullWidth:!0,label:y[22].headerName,onChange:e=>{x(e,e.target.value,R[19])}})),n.createElement(f.ZP,{item:!0,xs:4},n.createElement(g.Z,{variant:"outlined",fullWidth:!0,label:y[23].headerName,onChange:e=>{x(e,e.target.value,R[20])}})),n.createElement(f.ZP,{item:!0,xs:4},n.createElement(b.Z,{value:u[R[21]],options:c,onChange:(e,t)=>{x(e,t,R[21])},renderInput:e=>n.createElement(g.Z,D({},e,{variant:"outlined",label:y[24].headerName}))})),n.createElement(f.ZP,{item:!0,xs:4},n.createElement(g.Z,{variant:"outlined",fullWidth:!0,label:y[25].headerName,onChange:e=>{x(e,e.target.value,R[22])}})),n.createElement(f.ZP,{item:!0,xs:6,sx:{justifyContent:"center",textAlign:"center"}},n.createElement(C.Z,{variant:"contained",color:"success",onClick:()=>{0===Object.keys(u).filter((e=>!R.slice(19,23).includes(e))).filter((e=>0===u[e].length)).length?async function(){const e=function(e){const{crop:t,site:a,target:n,decision_support:r,chemical_purchase:i,equipment:l,water_unit:d,rate_unit:o,amount_unit:s,area_unit:c,...u}=e;return{crop_id:t,site_list:a,target_id:n,decision_support_id:r,chemical_purchase_id:i,equipment_id:l,water_unit_id:d,rate_unit_id:o,amount_unit_id:s,area_unit_id:c,...u}}(p);console.log(e);const t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)};await fetch("/api/operation/application/create/",t).then((e=>{e.ok&&(S(!0),O(!1),A(~$))}))}():I()}},"Save")),n.createElement(f.ZP,{item:!0,xs:6,sx:{justifyContent:"center",textAlign:"center"}},n.createElement(C.Z,{variant:"contained",color:"secondary",onClick:()=>O(!1)},"Cancel"))))))}function B(e){const t=e.uid,[a,r]=(0,n.useState)([]),[m,h]=(0,n.useState)([]),[E,v]=(0,n.useState)([]),[_,f]=(0,n.useState)([]),[w,Z]=(0,n.useState)([]),[C,y]=(0,n.useState)([]),[x,S]=(0,n.useState)([]),[N,I]=(0,n.useState)([]),[$,A]=(0,n.useState)([]),[B,J]=(0,n.useState)([]),[V,K]=(0,n.useState)([]),[Q,X]=(0,n.useState)([]),[ee,te]=(0,n.useState)([]),[ae,ne]=(0,n.useState)([]),[re,ie]=(0,n.useState)([]),[le,de]=(0,n.useState)([]),[oe,se]=(0,n.useState)([]),[ce,ue]=(0,n.useState)([]),[pe]=(0,n.useState)(F),[me,he]=(0,n.useState)([]),[Ee,ve]=(0,n.useState)([]),[_e,fe]=(0,n.useState)([]),[be,ge]=(0,n.useState)({}),[we,Ze]=(0,n.useState)({}),[Ce,ye]=(0,n.useState)(!1),[xe,Pe]=(0,n.useState)(!1),[Oe,Se]=(0,n.useState)(!1),[Ne,Ie]=(0,n.useState)(!1),[$e,Ae]=(0,n.useState)(!0),[ke,je]=(0,n.useState)([]),[Te,Ue]=(0,n.useState)(null),[He,qe]=(0,n.useState)(null),[De,Ge]=(0,n.useState)(null),[Ye,Me]=(0,n.useState)(!1);async function Re(e){await fetch("/api/crop/list/get/?uid="+e,{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>{e.ok&&e.json().then((e=>{h(e.data)}))}))}async function We(e){await fetch("/api/site/list/get/?uid="+e,{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>{e.ok&&e.json().then((e=>{v(et(e.data))}))}))}async function Fe(e){await fetch("/api/chemical/list/get/?uid="+e,{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>{e.ok&&e.json().then((e=>{f(e.data)}))}))}async function Le(e){await fetch("/api/equipment/list/get/?uid="+e,{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>{e.ok&&e.json().then((e=>{y(e.data)}))}))}async function ze(e){await fetch("/api/operation/purchase/list/get/?uid="+e,{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>{e.ok&&e.json().then((e=>{Z(e.data)}))}))}async function Be(e){await fetch("/api/operation/application/list/get/?uid="+e,{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>{e.ok&&e.json().then((e=>{const t=e.data.filter((e=>"Spray"===e.type));r(t)}))}))}async function Je(){await fetch("/api/crop/category/",{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>{e.ok&&e.json().then((e=>{S(e.data)}))}))}async function Ve(){await fetch("/api/operation/application/type/",{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>{e.ok&&e.json().then((e=>{I(e.data)}))}))}async function Ke(){await fetch("/api/operation/application/target/",{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>{e.ok&&e.json().then((e=>{A(e.data)}))}))}async function Qe(){await fetch("/api/operation/application/desicisionsupport/",{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>{e.ok&&e.json().then((e=>{J(e.data)}))}))}async function Xe(){await fetch("/api/unit/",{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>{e.ok&&e.json().then((e=>{K(e.data)}))}))}const et=e=>{let t=[];for(let a=0;a<e.length;a++){let n={};n={...e[a]},delete n.children,t.push(n),e[a].children&&(t=t.concat(et(e[a].children)))}return t},tt=e=>{if("string"!=typeof e)return null;const t=e.match(/(\d+\.\d+)|(\d+)/);return t?t[0]:null},at=()=>{je(Object.fromEntries(R.map((e=>[e,!1]))))},nt=()=>{Object.keys(we).forEach((e=>{0===we[e].length?je((t=>({...t,[e]:!0}))):je((t=>({...t,[e]:!1})))}))},rt=()=>{if(0===Object.keys(we).filter((e=>!R.slice(19,23).includes(e))).filter((e=>0===we[e].length)).length){!async function(){const e=function(e){const{crop:t,site:a,target:n,decision_support:r,chemical_purchase:i,equipment:l,water_unit:d,rate_unit:o,amount_unit:s,area_unit:c,...u}=e;return{crop_id:t,site_id:a,target_id:n,decision_support_id:r,chemical_purchase_id:i,equipment_id:l,water_unit_id:d,rate_unit_id:o,amount_unit_id:s,area_unit_id:c,...u}}(be);console.log(e);const t={method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)};await fetch("/api/operation/application/update/",t).then((e=>{e.ok&&(Se(!0),Ue(null),Me(~Ye))}))}();const e=_e.findIndex((e=>e.id===we.id));fe([..._e.slice(0,e),we,..._e.slice(e+1)])}else nt()},it=e=>{!async function(e){const a={user:t,arid:e};console.log(a);const n={method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)};await fetch("/api/operation/application/delete/",n).then((e=>{e.ok&&(Ie(!0),Me(~Ye))}))}(e.id);const a=_e.findIndex((t=>t.id===e.id));fe([..._e.slice(0,a),..._e.slice(a+1)])},lt=(e,t,a)=>{a===R[0]?(Ze({...we,[a]:t,[R[1]]:[],[R[8]]:""}),ge({...be,[a]:t.id,[R[1]]:[],[R[8]]:null})):a===R[1]?(Ze({...we,[a]:t}),ge({...be,[a]:t.map((e=>e.id))})):a===R[3]?(Ze({...we,[a]:t,[R[15]]:t.label}),ge({...be,[a]:t.id,[R[15]]:t.id})):a===R[10]?(Ze({...we,[a]:t,[R[17]]:t.unit,cost_per_unit:t.cost_per_unit}),ge({...be,[a]:t.id,[R[17]]:Ee.find((e=>e.label===t.unit)).id})):a===R[21]?(Ze({...we,[a]:t}),ge({...be,[a]:t.label})):[R[2],R[4],R[5],R[6],R[7],R[12],R[14],R[19],R[20],R[22]].includes(a)?(Ze({...we,[a]:t}),ge({...be,[a]:t})):(Ze({...we,[a]:t}),ge({...be,[a]:t.id}))},dt=(e,t,a)=>{a===R[0]?(Ze({...we,[a]:t,[R[1]]:"",[R[8]]:""}),ge({...be,[a]:t.id,[R[1]]:null,[R[8]]:null})):a===R[1]?(Ze({...we,[a]:t}),ge({...be,[a]:t.id})):a===R[3]?(Ze({...we,[a]:t,[R[15]]:t.label}),ge({...be,[a]:t.id,[R[15]]:t.id})):a===R[10]?(Ze({...we,[a]:t,[R[17]]:t.unit,trade_name:t.trade_name,active_ingredient:t.active_ingredient,percent_ai:t.percent_ai,rei:t.rei,phi:t.phi,cost_per_unit:t.cost_per_unit}),ge({...be,[a]:t.id,[R[17]]:Ee.find((e=>e.label===t.unit)).id})):a===R[21]?(Ze({...we,[a]:t}),ge({...be,[a]:t.label})):[R[2],R[4],R[5],R[6],R[7],R[12],R[14],R[19],R[20],R[22]].includes(a)?(Ze({...we,[a]:t}),ge({...be,[a]:t})):(Ze({...we,[a]:t}),ge({...be,[a]:t.id}))},ot=[{field:"operations",headerName:"Operations",sortable:!1,width:100,disableColumnMenu:!0,disableClickEventBubbling:!0,renderCell:e=>Te!==e.id?n.createElement(n.Fragment,null,n.createElement(d.Z,{onClick:()=>(e=>{const t=a.find((t=>t.arid===e.id)),n=Object.keys(e.row).reduce(((t,a)=>(t[a]=null===e.row[a]?"":e.row[a],t)),{});ge({arid:e.id,crop:t.crop}),Ze({...n,[R[3]]:t.area_unit,[R[13]]:t.water_unit,[R[15]]:t.rate_unit,[R[16]]:t.total_amount,[R[17]]:t.amount_unit,[R[18]]:t.total_cost}),Ue(e.id),at()})(e)},n.createElement(s.Z,null)),n.createElement(d.Z,{onClick:t=>{qe(t.currentTarget),Ge(e.id)}},n.createElement(c.Z,null)),De===e.id&&n.createElement(j.Z,{anchorEl:He,setAnchorEl:qe,onDeleteClicked:it,params:e,msg:"Delete this record?",type:"delete"})):n.createElement(n.Fragment,null,n.createElement(d.Z,{onClick:t=>{qe(t.currentTarget),Ge(e.id)}},n.createElement(u.Z,null)),n.createElement(d.Z,{onClick:()=>(Ue(null),void at())},n.createElement(p.Z,null)),De===e.id&&n.createElement(j.Z,{anchorEl:He,setAnchorEl:qe,onSaveClicked:rt,params:e,msg:"Update this record?",type:"update"}))},{field:"crop",headerName:"Crop",sortable:!1,width:M,renderCell:(e,t=e.id)=>n.createElement(b.Z,{options:Q,disableClearable:!0,readOnly:Te!==t,value:Te===t?we[R[0]]:e.value,onChange:(e,t)=>{dt(0,t,R[0])},renderInput:e=>Te!==t?n.createElement(g.Z,D({},e,{variant:"standard",InputProps:{disableUnderline:!0},sx:{width:M}})):n.createElement(g.Z,D({},e,{variant:"standard",sx:{width:M-20},error:ke[R[0]]}))})},{field:"site",headerName:"Site",sortable:!1,width:M,renderCell:(e,t=e.id)=>n.createElement(b.Z,{options:ee,disableClearable:!0,readOnly:Te!==t,value:Te===t?we[R[1]]:e.value,onChange:(e,t)=>{dt(0,t,R[1])},renderInput:e=>Te!==t?n.createElement(g.Z,D({},e,{variant:"standard",InputProps:{disableUnderline:!0},sx:{width:M}})):n.createElement(g.Z,D({},e,{variant:"standard",sx:{width:M-20},error:ke[R[1]]}))})},{field:"applied_area",headerName:"Applied Area",sortable:!1,width:G,renderCell:(e,t=e.id)=>Te!==t?n.createElement(g.Z,{variant:"standard",value:e.value,InputProps:{disableUnderline:!0,readOnly:!0},sx:{width:G}}):n.createElement(n.Fragment,null,n.createElement(g.Z,{variant:"standard",value:tt(we[R[2]]),sx:{width:G/3},type:"number",inputProps:{step:.01},onChange:e=>{dt(0,e.target.value,R[2])},error:ke[R[2]]}),n.createElement(b.Z,{options:me,disableClearable:!0,value:we[R[3]],onChange:(e,t)=>{lt(0,t,R[3])},renderInput:e=>n.createElement(g.Z,D({},e,{required:!0,variant:"standard",sx:{width:2*G/3},error:ke[R[3]]}))}))},{field:"app_date",headerName:"Application Date",sortable:!1,width:G,renderCell:(e,t=e.id)=>Te!==t?n.createElement(g.Z,{variant:"standard",value:e.value,InputProps:{disableUnderline:!0,readOnly:!0},sx:{width:G}}):n.createElement(T._,{dateAdapter:U.y},n.createElement(q.M,{variant:"standard",value:i()(we[R[4]]),sx:{width:G-20},slotProps:{textField:{variant:"standard"}},onChange:e=>{dt(0,i()(e).format("YYYY-MM-DD"),R[4])}}))},{field:"start_time",headerName:"Start Time",sortable:!1,width:G,renderCell:(e,t=e.id)=>Te!==t?n.createElement(g.Z,{variant:"standard",value:e.value,InputProps:{disableUnderline:!0,readOnly:!0},sx:{width:G}}):n.createElement(T._,{dateAdapter:U.y},n.createElement(H.j,{variant:"standard",value:i()(`1970-01-01T${i()(we[R[5]],"h:mm A").format("HH:mm")}`),sx:{width:G-20},slotProps:{textField:{variant:"standard"}},onChange:e=>{lt(0,i()(e).format("HH:mm A"),R[5])}}))},{field:"finish_time",headerName:"Finish Time",sortable:!1,width:G,renderCell:(e,t=e.id)=>Te!==t?n.createElement(g.Z,{variant:"standard",value:e.value,InputProps:{disableUnderline:!0,readOnly:!0},sx:{width:G}}):n.createElement(T._,{dateAdapter:U.y},n.createElement(H.j,{variant:"standard",value:i()(`1970-01-01T${i()(we[R[6]],"h:mm A").format("HH:mm")}`),sx:{width:G-20},slotProps:{textField:{variant:"standard"}},onChange:e=>{lt(0,i()(e).format("HH:mm A"),R[6])}}))},{field:"operator",headerName:"Operator",sortable:!1,width:G,renderCell:(e,t=e.id)=>Te!==t?n.createElement(g.Z,{variant:"standard",value:e.value,InputProps:{disableUnderline:!0,readOnly:!0},sx:{width:G}}):n.createElement(g.Z,{variant:"standard",value:we[R[7]],sx:{width:G-20},onChange:e=>{dt(0,e.target.value,R[7])},error:ke[R[7]]})},{field:"target",headerName:"Application Target",sortable:!1,width:G,renderCell:(e,t=e.id)=>n.createElement(b.Z,{options:ae,disableClearable:!0,readOnly:Te!==t,value:Te===t?we[R[8]]:e.value,onChange:(e,t)=>{dt(0,t,R[8])},renderInput:e=>Te!==t?n.createElement(g.Z,D({},e,{variant:"standard",InputProps:{disableUnderline:!0},sx:{width:G}})):n.createElement(g.Z,D({},e,{variant:"standard",sx:{width:G-20},error:ke[R[8]]}))})},{field:"decision_support",headerName:"Decision Support",sortable:!1,width:G,renderCell:(e,t=e.id)=>n.createElement(b.Z,{options:re,disableClearable:!0,readOnly:Te!==t,value:Te===t?we[R[9]]:e.value,onChange:(e,t)=>{dt(0,t,R[9])},renderInput:e=>Te!==t?n.createElement(g.Z,D({},e,{variant:"standard",InputProps:{disableUnderline:!0},sx:{width:G}})):n.createElement(g.Z,D({},e,{variant:"standard",sx:{width:G-20},error:ke[R[9]]}))})},{field:"chemical_purchase",headerName:"EPA Registration No.",sortable:!1,width:Y,renderCell:(e,t=e.id)=>n.createElement(b.Z,{options:oe,disableClearable:!0,readOnly:Te!==t,value:Te===t?we[R[10]]:e.value,onChange:(e,t)=>{dt(0,t,R[10])},renderInput:e=>Te!==t?n.createElement(g.Z,D({},e,{variant:"standard",InputProps:{disableUnderline:!0},sx:{width:Y}})):n.createElement(g.Z,D({},e,{variant:"standard",sx:{width:Y-20},error:ke[R[10]]}))})},{field:"trade_name",headerName:"Trade Name",sortable:!1,width:Y,valueGetter:e=>Te===e.id?we.trade_name:e.value},{field:"active_ingredient",headerName:"Active Ingredient",sortable:!1,width:Y,valueGetter:e=>Te===e.id?we.active_ingredient:e.value},{field:"percent_ai",headerName:"Active Ingredient Percent",sortable:!1,width:Y,valueGetter:e=>Te===e.id?we.percent_ai:e.value},{field:"rei",headerName:"REI",sortable:!1,width:G,valueGetter:e=>Te===e.id?we.rei:e.value},{field:"phi",headerName:"PHI",sortable:!1,width:G,valueGetter:e=>Te===e.id?we.phi:e.value},{field:"cost_per_unit",headerName:"Cost per Unit",sortable:!1,width:G,valueGetter:e=>Te===e.id?we.cost_per_unit:e.value},{field:"equipment",headerName:"Equipment",sortable:!1,width:G,renderCell:(e,t=e.id)=>n.createElement(b.Z,{options:ce,disableClearable:!0,readOnly:Te!==t,value:Te===t?we[R[11]]:e.value,onChange:(e,t)=>{dt(0,t,R[11])},renderInput:e=>Te!==t?n.createElement(g.Z,D({},e,{variant:"standard",InputProps:{disableUnderline:!0},sx:{width:G}})):n.createElement(g.Z,D({},e,{variant:"standard",sx:{width:G-20},error:ke[R[11]]}))})},{field:"water_use",headerName:"Water Use",sortable:!1,width:Y,renderCell:(e,t=e.id)=>Te!==t?n.createElement(g.Z,{variant:"standard",value:e.value,InputProps:{disableUnderline:!0,readOnly:!0},sx:{width:Y}}):n.createElement(n.Fragment,null,n.createElement(g.Z,{variant:"standard",value:tt(we[R[12]]),sx:{width:Y/3},type:"number",inputProps:{step:.01},onChange:e=>{dt(0,e.target.value,R[12])},error:ke[R[12]]}),n.createElement(b.Z,{options:Ee,disableClearable:!0,value:we[R[13]],onChange:(e,t)=>{lt(0,t,R[13])},renderInput:e=>n.createElement(g.Z,D({},e,{required:!0,variant:"standard",sx:{width:Y/3},error:ke[R[13]]}))}),n.createElement(g.Z,{variant:"standard",value:`per ${we[R[15]]}`,sx:{width:Y/3},InputLabelProps:{readOnly:!0}}))},{field:"application_rate",headerName:"Application Rate",sortable:!1,width:Y,renderCell:(e,t=e.id)=>Te!==t?n.createElement(g.Z,{variant:"standard",value:e.value,InputProps:{disableUnderline:!0,readOnly:!0},sx:{width:G}}):n.createElement(n.Fragment,null,n.createElement(g.Z,{variant:"standard",value:tt(we[R[14]]),sx:{width:Y/3},type:"number",inputProps:{step:.01},onChange:e=>{dt(0,e.target.value,R[14])},error:ke[R[14]]}),n.createElement(g.Z,{variant:"standard",value:`${we[R[17]]} per ${we[R[15]]}`,sx:{width:2*Y/3},InputLabelProps:{readOnly:!0}}))},{field:"total_amount",headerName:"Total Amount",sortable:!1,width:G,valueGetter:e=>Te===e.id?`${we[R[16]]} ${we[R[17]]}`:e.value},{field:"total_cost",headerName:"Total Cost",sortable:!1,width:G,valueGetter:e=>Te===e.id?`$${we[R[18]]}`:e.value},{field:"customer",headerName:"Customer",sortable:!1,width:G,renderCell:(e,t=e.id)=>Te!==t?n.createElement(g.Z,{variant:"standard",value:e.value,InputProps:{disableUnderline:!0,readOnly:!0},sx:{width:G}}):n.createElement(g.Z,{variant:"standard",value:we[R[19]],sx:{width:G-20},onChange:e=>{dt(0,e.target.value,R[19])}})},{field:"wind_speed",headerName:"Wind Speed",sortable:!1,width:G,renderCell:(e,t=e.id)=>Te!==t?n.createElement(g.Z,{variant:"standard",value:e.value,InputProps:{disableUnderline:!0,readOnly:!0},sx:{width:G}}):n.createElement(g.Z,{variant:"standard",value:we[R[20]],sx:{width:G-20},onChange:e=>{dt(0,e.target.value,R[20])}})},{field:"wind_direction",headerName:"Wind Direction",sortable:!1,width:G,renderCell:(e,t=e.id)=>n.createElement(b.Z,{options:pe,disableClearable:!0,readOnly:Te!==t,value:Te===t?we[R[21]]:e.value,onChange:(e,t)=>{dt(0,t,R[21])},renderInput:e=>Te!==t?n.createElement(g.Z,D({},e,{variant:"standard",InputProps:{disableUnderline:!0},sx:{width:G}})):n.createElement(g.Z,D({},e,{variant:"standard",sx:{width:G-20}}))})},{field:"average_temp",headerName:"Average Temperature",sortable:!1,width:G,renderCell:(e,t=e.id)=>Te!==t?n.createElement(g.Z,{variant:"standard",value:e.value,InputProps:{disableUnderline:!0,readOnly:!0},sx:{width:G}}):n.createElement(g.Z,{variant:"standard",value:we[R[22]],sx:{width:G-20},onChange:e=>{dt(0,e.target.value,R[22])}})},{field:"update_time",headerName:"Update Time",sortable:!1,width:G}],st={cropOptions:Q,siteOptions:ee,siteUnitOptions:me,applicationTargetOptions:ae,decisionSupportOptions:re,addChemicalOptions:le,equipmentOptions:ce,chemicalUnitOptions:Ee,windDirectionOptions:pe,fieldValues:we,formData:be,columns:ot,handleAddInputChange:lt,showAddModal:xe,setShowAddModal:Pe,setIsSave:Se,inputError:ke,updateInputError:nt,refreshRecord:Ye,setRefreshRecord:Me},ct={open:Oe,setOpen:Se,msg:"Crop record is uploaded successfully!",tag:"success"},ut={open:Ne,setOpen:Ie,msg:"Crop record has been deleted!",tag:"success"};return(0,n.useEffect)((()=>{(async()=>{await Promise.all([Je(),Ve(),Ke(),Qe(),Xe(),Re(t),We(t),Le(t),await Fe(t),ze(t)]),await Be(t)})(),at(),ye(!0)}),[]),(0,n.useEffect)((()=>{X(m.map((e=>({label:`${e.crop} (${e.variety}, ${e.growth_stage})`,id:e.cid}))))}),[m]),(0,n.useEffect)((()=>{(e=>{const t=E.filter((e=>W.includes(e.type)));let a=[];t.filter((t=>t.crop.cid===e)).map((t=>{let n=t,r=n.name;const i=n.sid;for(;n.parent;)n=E.find((e=>e.sid===n.parent)),r=`${n.name} - ${r}`;a.push({label:r,cid:e,id:i})})),te(a)})(be[R[0]]),(e=>{const t=m.find((t=>t.cid===e));t&&ne($.filter((e=>e.crop_id===x.find((e=>e.name===t.crop)).ccid||null===e.crop_id)).map((e=>({label:e.name,id:e.attid}))))})(be[R[0]])}),[be[R[0]]]),(0,n.useEffect)((()=>{ie(B.map((e=>({label:e.name,id:e.dsid}))))}),[B]),(0,n.useEffect)((()=>{de(w.map((e=>{const t=_.find((t=>t.chemid===e.chemical));return{label:`${t.epa_reg_no}  |  ${t.trade_name}  |  ${t.active_ingredient}  |  ${t.rei}  |  ${t.phi}  |  $${e.cost_per_unit} per ${t.unit}  | ${e.pur_datetime}`,unit:t.unit,cost_per_unit:`$${e.cost_per_unit} per ${t.unit}`,id:e.prid}}))),se(w.map((e=>{const t=_.find((t=>t.chemid===e.chemical));return{label:t.epa_reg_no,trade_name:t.trade_name,active_ingredient:t.active_ingredient,percent_ai:t.percent_ai,rei:t.rei,phi:t.phi,unit:t.unit,cost_per_unit:`$${e.cost_per_unit} per ${t.unit}`,pur_datetime:e.pur_datetime,id:e.prid}})))}),[w]),(0,n.useEffect)((()=>{ue(C.map((e=>({label:`${e.name} (${e.owner}, ${e.code})`,id:e.eid}))))}),[C]),(0,n.useEffect)((()=>{he(V.filter((e=>"site"===e.usage)).map((e=>({label:e.name,id:e.unitid})))),ve(V.filter((e=>"chemical"===e.usage)).map((e=>({label:e.name,id:e.unitid}))))}),[V]),(0,n.useEffect)((()=>{$e?fe(a.map((e=>(e=>{const t=m.find((t=>t.cid===e.crop)),a=w.find((t=>t.prid===e.chemical_purchase)),n=_.find((e=>e.chemid===a.chemical)),r=C.find((t=>t.eid===e.equipment));let i=E.find((t=>t.sid===e.site)),l=i.name;for(;i.parent;)i=E.find((e=>e.sid===i.parent)),l=`${i.name} - ${l}`;return{id:e.arid,crop:`${t.crop} (${t.variety}, ${t.growth_stage})`,site:l,applied_area:`${e.applied_area} ${e.area_unit}`,app_date:e.app_date,start_time:e.start_time,finish_time:e.finish_time,operator:e.operator,target:e.target,decision_support:e.decision_support,chemical_purchase:n.epa_reg_no,trade_name:n.trade_name,active_ingredient:n.active_ingredient,percent_ai:n.percent_ai,rei:n.rei,phi:n.phi,cost_per_unit:`$${a.cost_per_unit} per ${n.unit}`,equipment:r.name,water_use:`${e.water_use} ${e.water_unit} per ${e.area_unit}`,application_rate:`${e.application_rate} ${n.unit} per ${e.area_unit}`,total_amount:`${e.total_amount} ${n.unit}`,total_cost:`$${e.total_cost}`,customer:e.customer,wind_speed:e.wind_speed,wind_direction:e.wind_direction,average_temp:e.average_temp,update_time:e.update_time}})(e)))):console.log(1)}),[a]),(0,n.useEffect)((()=>{Ce&&Be(t)}),[Ye]),(0,n.useEffect)((()=>{const e=tt(we.cost_per_unit),t=tt(we[R[2]]),a=tt(we[R[14]]);if(e&&t&&a){const n=Number(t)*Number(a),r=Number(t)*Number(a)*Number(e);Ze({...we,[R[16]]:n,[R[18]]:r}),ge({...be,[R[16]]:n,[R[18]]:r})}else if(t&&a){const e=Number(t)*Number(a);Ze({...we,[R[14]]:e}),ge({...be,[R[14]]:e})}}),[we.cost_per_unit,we[R[2]],we[R[14]]]),n.createElement("div",null,n.createElement(P,{variant:"contained",startIcon:n.createElement(o.Z,null),onClick:()=>(()=>{ge({user_id:t,type_id:N.find((e=>"Spray"===e.name)).atid,[R[4]]:i()().format("YYYY-MM-DD"),[R[5]]:i()().format("HH:mm A"),[R[6]]:i()().format("HH:mm A")});const e={1:[],4:i()().format("YYYY-MM-DD"),5:i()().format("HH:mm A"),6:i()().format("HH:mm A")};Ze(Object.fromEntries(R.map((t=>{var a;return[t,null!==(a=e[R.indexOf(t)])&&void 0!==a?a:""]})))),Ue(null),Pe(!0),at()})()},"Add Spray Record"),n.createElement(l.Z,{style:{height:900,margin:"0px 15px"}},n.createElement(k._,{columns:ot,rows:_e,disableRowSelectionOnClick:!0,disableClickEdit:!0,rowSelection:!1,slots:{toolbar:L}})),n.createElement(z,st),n.createElement(O.Z,ct),n.createElement(O.Z,ut))}}}]);