/*! For license information please see src_pages_People_ReportSharingWindow_index_js.js.LICENSE.txt */
"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([["src_pages_People_ReportSharingWindow_index_js"],{"./src/components/Snackbars/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (/* binding */ OperationSnackbars)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _mui_material_Stack__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @mui/material/Stack */ "./node_modules/@mui/material/Stack/Stack.js");\n/* harmony import */ var _mui_material_Snackbar__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @mui/material/Snackbar */ "./node_modules/@mui/material/Snackbar/Snackbar.js");\n/* harmony import */ var _mui_material_Alert__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @mui/material/Alert */ "./node_modules/@mui/material/Alert/Alert.js");\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\n\n\n\nconst Alert = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.forwardRef(function Alert(props, ref) {\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material_Alert__WEBPACK_IMPORTED_MODULE_1__["default"], _extends({\n    elevation: 6,\n    ref: ref,\n    variant: "filled"\n  }, props));\n});\nfunction OperationSnackbars(props) {\n  const handleClose = (event, reason) => {\n    if (reason === \'clickaway\') {\n      return;\n    }\n    props.setOpen(false);\n  };\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material_Stack__WEBPACK_IMPORTED_MODULE_2__["default"], {\n    spacing: 2,\n    sx: {\n      width: \'100%\'\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(_mui_material_Snackbar__WEBPACK_IMPORTED_MODULE_3__["default"], {\n    open: props.open,\n    autoHideDuration: 6000,\n    onClose: handleClose\n  }, (() => {\n    switch (props.tag) {\n      case \'success\':\n        return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(Alert, {\n          onClose: handleClose,\n          severity: "success",\n          sx: {\n            width: \'100%\'\n          }\n        }, props.msg);\n      case \'error\':\n        return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(Alert, {\n          onClose: handleClose,\n          severity: "error",\n          sx: {\n            width: \'100%\'\n          }\n        }, props.msg);\n      case \'warning\':\n        return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0__.createElement(Alert, {\n          onClose: handleClose,\n          severity: "warning",\n          sx: {\n            width: \'100%\'\n          }\n        }, props.msg);\n      default:\n        return null;\n    }\n  })()));\n}\n\n//# sourceURL=webpack://frontend/./src/components/Snackbars/index.js?')},"./src/pages/People/ReportSharingWindow/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (/* binding */ ReportSharingWindow)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Dialog/Dialog.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/DialogTitle/DialogTitle.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/DialogContent/DialogContent.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/DialogContentText/DialogContentText.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/TextField/TextField.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/DialogActions/DialogActions.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Button/Button.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Grid/Grid.js");\n/* harmony import */ var _mui_material__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @mui/material */ "./node_modules/@mui/material/Modal/Modal.js");\n/* harmony import */ var _mui_material_Paper__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @mui/material/Paper */ "./node_modules/@mui/material/Paper/Paper.js");\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../utils */ "./src/utils/index.js");\n/* harmony import */ var _components_Snackbars__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../components/Snackbars */ "./src/components/Snackbars/index.js");\n/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react-router-dom */ "./node_modules/react-router/dist/index.js");\n\n\n\n\n\n\nconst ReportFileList = /*#__PURE__*/(0,react__WEBPACK_IMPORTED_MODULE_0__.lazy)(() => __webpack_require__.e(/*! import() */ "src_pages_People_ReportSharingWindow_ReportFileList_index_js").then(__webpack_require__.bind(__webpack_require__, /*! ./ReportFileList */ "./src/pages/People/ReportSharingWindow/ReportFileList/index.js")));\nconst SharingHistoryList = /*#__PURE__*/(0,react__WEBPACK_IMPORTED_MODULE_0__.lazy)(() => Promise.all(/*! import() */[__webpack_require__.e("vendors-node_modules_mui_material_Divider_Divider_js-node_modules_mui_material_ListItemIcon_L-189f4a"), __webpack_require__.e("vendors-node_modules_mui_material_Badge_Badge_js"), __webpack_require__.e("vendors-node_modules_mui_material_ListItem_ListItem_js"), __webpack_require__.e("vendors-node_modules_mui_icons-material_ExpandLess_js-node_modules_mui_icons-material_ExpandM-927874"), __webpack_require__.e("vendors-node_modules_mui_material_Drawer_Drawer_js-node_modules_mui_material_ListItemButton_L-3f89e2"), __webpack_require__.e("node_modules_mui_utils_esm_usePreviousProps_js-src_pages_People_ReportSharingWindow_SharingHi-5b3c37")]).then(__webpack_require__.bind(__webpack_require__, /*! ./SharingHistoryList */ "./src/pages/People/ReportSharingWindow/SharingHistoryList/index.js")));\nfunction ReportSharingWindow(props) {\n  const [refreshRecord, setRefreshRecord] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n  const [selectedFiles, setSelectedFiles] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([]);\n  const [dialogOpen, setDialogOpen] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n  const [subjectContent, setSubjectContent] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)("");\n  const [subjectError, setSubjectError] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n  const [isSend, setIsSend] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n  const [isNonSelected, setIsNonSelected] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n  const location = (0,react_router_dom__WEBPACK_IMPORTED_MODULE_3__.useLocation)();\n  const searchParams = new URLSearchParams(location.search);\n  async function SendReports(author_id, recipient_id, selected_reports, subject) {\n    const apiData = {\n      author_id,\n      recipient_id,\n      selected_reports,\n      subject\n    };\n    console.log(apiData);\n    const csrftoken = (0,_utils__WEBPACK_IMPORTED_MODULE_1__.getCookie)(\'csrftoken\');\n    const requestOptions = {\n      method: "POST",\n      headers: {\n        "Content-Type": "application/json",\n        \'X-CSRFToken\': csrftoken\n      },\n      body: JSON.stringify(apiData)\n    };\n    await fetch("/media/reports/send/", requestOptions).then(response => {\n      if (response.ok) {\n        setIsSend(true);\n        setDialogOpen(false);\n        setSelectedFiles([]);\n        setRefreshRecord(~refreshRecord);\n      }\n    });\n  }\n  async function MessageGet(mid) {\n    const requestOptions = {\n      method: "GET",\n      headers: {\n        "Content-Type": "application/json"\n      }\n    };\n    await fetch("/message/get" + "?mid=" + mid, requestOptions).then(response => {\n      if (response.ok) {\n        response.json().then(data => {\n          props.setSelectedUser(data.data.author);\n        });\n      }\n    });\n  }\n  const handleSendButtonPressed = () => {\n    if (subjectContent === "") {\n      setSubjectError(true);\n    } else {\n      SendReports(props.employerID, props.selectedUser, selectedFiles, subjectContent);\n    }\n  };\n  const subjectDialog = () => {\n    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_mui_material__WEBPACK_IMPORTED_MODULE_4__["default"], {\n      open: dialogOpen\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_mui_material__WEBPACK_IMPORTED_MODULE_5__["default"], null, "Subject"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_mui_material__WEBPACK_IMPORTED_MODULE_6__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_mui_material__WEBPACK_IMPORTED_MODULE_7__["default"], null, "Please input the subject for the reports sharing."), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_mui_material__WEBPACK_IMPORTED_MODULE_8__["default"], {\n      autoFocus: true,\n      margin: "dense",\n      id: "subject",\n      fullWidth: true,\n      variant: "standard",\n      error: subjectError,\n      onChange: event => {\n        setSubjectContent(event.target.value);\n      }\n    })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_mui_material__WEBPACK_IMPORTED_MODULE_9__["default"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_mui_material__WEBPACK_IMPORTED_MODULE_10__["default"], {\n      onClick: () => setDialogOpen(false)\n    }, "Cancel"), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_mui_material__WEBPACK_IMPORTED_MODULE_10__["default"], {\n      onClick: () => handleSendButtonPressed()\n    }, "Send")));\n  };\n  const buttonRender = () => {\n    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement((react__WEBPACK_IMPORTED_MODULE_0___default().Fragment), null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_mui_material__WEBPACK_IMPORTED_MODULE_11__["default"], {\n      item: true,\n      xs: 4,\n      sx: {\n        justifyContent: \'center\',\n        textAlign: \'center\'\n      }\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_mui_material__WEBPACK_IMPORTED_MODULE_10__["default"], {\n      variant: "contained",\n      color: "secondary",\n      onClick: () => props.setOpenFileWindow(false)\n    }, "Close")), props.relationType !== "Client" && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_mui_material__WEBPACK_IMPORTED_MODULE_11__["default"], {\n      item: true,\n      xs: 4,\n      sx: {\n        justifyContent: \'center\',\n        textAlign: \'center\'\n      }\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_mui_material__WEBPACK_IMPORTED_MODULE_10__["default"], {\n      variant: "contained",\n      color: "success",\n      onClick: () => {\n        if (selectedFiles.length > 0) {\n          setDialogOpen(true);\n        } else {\n          setIsNonSelected(true);\n        }\n      }\n    }, "Send Reports")));\n  };\n  const dataGridProps = {\n    ...props,\n    refreshRecord,\n    setRefreshRecord,\n    selectedFiles,\n    setSelectedFiles\n  };\n  const historyProps = {\n    ...props,\n    refreshRecord,\n    setRefreshRecord\n  };\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    if (searchParams.get(\'mid\') && searchParams.get(\'reportHistory\')) {\n      props.setOpenFileWindow(true);\n      MessageGet(searchParams.get(\'mid\'));\n    }\n  }, []);\n  const OwnerEmployeeWindowRender = () => {\n    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_mui_material_Paper__WEBPACK_IMPORTED_MODULE_12__["default"], {\n      style: {\n        height: \'calc(3/4 * 100vh)\',\n        width: \'calc(4/5 * 100vw)\'\n      }\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_mui_material__WEBPACK_IMPORTED_MODULE_11__["default"], {\n      container: true,\n      justifyContent: "center",\n      spacing: 2\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_mui_material__WEBPACK_IMPORTED_MODULE_11__["default"], {\n      item: true,\n      xs: 8\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(ReportFileList, dataGridProps)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_mui_material__WEBPACK_IMPORTED_MODULE_11__["default"], {\n      item: true,\n      xs: 4\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(SharingHistoryList, historyProps)), buttonRender(), subjectDialog()));\n  };\n  const ClientWindowRender = () => {\n    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_mui_material_Paper__WEBPACK_IMPORTED_MODULE_12__["default"], {\n      style: {\n        height: \'calc(3/4 * 100vh)\',\n        width: \'calc(4/5 * 2/3 * 100vw)\'\n      }\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_mui_material__WEBPACK_IMPORTED_MODULE_11__["default"], {\n      container: true,\n      justifyContent: "center",\n      spacing: 2\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_mui_material__WEBPACK_IMPORTED_MODULE_11__["default"], {\n      item: true,\n      xs: 12\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(SharingHistoryList, historyProps)), buttonRender()));\n  };\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    setSubjectContent("");\n    setSubjectError(false);\n  }, [dialogOpen]);\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    setSelectedFiles([]);\n  }, [props.openFileWindow]);\n  const sendProps = {\n    open: isSend,\n    setOpen: setIsSend,\n    msg: "Selected reports have been sent!",\n    tag: "success"\n  };\n  const nonSelectedProps = {\n    open: isNonSelected,\n    setOpen: setIsNonSelected,\n    msg: "Please select at least one report to send!",\n    tag: "warning"\n  };\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_mui_material__WEBPACK_IMPORTED_MODULE_13__["default"], {\n    open: props.openFileWindow,\n    sx: {\n      display: \'flex\',\n      justifyContent: \'center\',\n      alignItems: \'center\'\n    }\n  }, props.relationType === "Client" ? ClientWindowRender() : OwnerEmployeeWindowRender()), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_components_Snackbars__WEBPACK_IMPORTED_MODULE_2__["default"], sendProps), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_components_Snackbars__WEBPACK_IMPORTED_MODULE_2__["default"], nonSelectedProps));\n}\n\n//# sourceURL=webpack://frontend/./src/pages/People/ReportSharingWindow/index.js?')}}]);